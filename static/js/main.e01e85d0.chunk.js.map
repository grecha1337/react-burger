{"version":3,"sources":["components/order-details/order-details.module.css","components/modal-overlay/modal-overlay.module.css","components/template-constructor-element/template-constructor-element.module.css","components/error-text/error-text.module.css","components/ingredient/ingredient.module.css","components/burger-ingredients/burger-ingredients.module.css","components/ingredient-details/ingredientDetails.module.css","components/app-header/app-header.tsx","services/hooks.ts","images/orderDone.svg","components/order-details/order-details.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","components/constructor-item/constructor-item.tsx","services/action/burger-constructor.ts","services/constant.ts","services/utils.ts","services/api.ts","services/action/burger-ingredients.ts","components/template-constructor-element/template-constructor-element.tsx","components/constructor-list/constructor-list.tsx","services/action/order-details.ts","components/error-text/error-text.tsx","components/burger-constructor/burger-constructor.tsx","components/ingredient/ingredient.tsx","components/ingredient-list/IngredientList.tsx","components/burger-ingredients/burger-ingredients.tsx","pages/home.tsx","services/action/user.ts","pages/login.tsx","pages/register.tsx","pages/forgot-password.tsx","pages/reset-password.tsx","components/sidebar-menu/sidebar-menu.tsx","pages/profile.tsx","components/protected-route/protected-route.tsx","components/ingredient-details/IngredientDetails.tsx","pages/ingredient.tsx","pages/not-found.tsx","components/App/App.tsx","services/reducers/burger-ingredients.ts","services/reducers/burger-constructor.ts","services/action/ingredient-details.ts","services/reducers/ingredient-details.ts","services/reducers/order-details.ts","services/reducers/user.ts","services/reducers/index.ts","services/store.ts","index.tsx","components/app-header/app-header.module.css","components/constructor-list/constructor-list.module.css","pages/profile.module.css","components/sidebar-menu/sidebar-menu.module.css","components/constructor-item/constructor-item.module.css","pages/home.module.css","components/burger-constructor/burger-constructor.module.css","components/modal/modal.module.css","components/ingredient-list/ingredientList.module.css"],"names":["module","exports","setActive","isActive","styles","linkHeader__active","linkHeader","AppHeader","pathname","useLocation","useState","activeIcon","setActiveIcon","useEffect","className","header","headerContent","menu","menu__list","menu__item","exact","to","onClick","type","logo","account","useDispatch","dispatchHook","useSelector","selectorHook","OrderDetails","order","style","orderDetails","src","orderDone","alt","ModalOverlay","children","onClose","styleModal","overlay","modalRoot","document","getElementById","Modal","title","closeOnEscape","e","key","addEventListener","removeEventListener","ReactDOM","createPortal","popup","stopPropagation","popup__title","popup__close","ConstructorItem","moveItem","index","id","ref","useRef","useDrop","accept","collect","monitor","isHover","isOver","drop","item","current","dragIndex","hoverIndex","useDrag","styleHover","outline","outlineOffset","drag","burgerConstructorList__innerItem","wrapperConstructorElement","ADD_INGREDIENT","ADD_BUN","DELETE_ITEM","REORDER_INGREDIENTS","SET_DEFAULT_VALUE_INGREDIENTS","REFRESH_TOKEN","ACCESS_TOKEN","setCookie","name","value","props","console","log","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","cookie","deleteCookie","getCookie","matches","match","RegExp","replace","decodeURIComponent","undefined","BASE_URL","checkResponse","res","a","json","ok","Promise","reject","status","refreshTokenRequest","token","fetch","method","headers","body","JSON","stringify","then","loginRequest","data","getProfileRequest","Authorization","refreshTokenAndFetchRetry","callback","responseJsonCallBack","tokenJson","accessToken","split","refreshToken","BURGER_INGREDIENTS_REQUEST","BURGER_INGREDIENTS_SUCCESS","BURGER_INGREDIENTS_FAILED","INCREMENT_INGREDIENTS","INCREMENT_BUN","DECREMENT_INGREDIENTS","RESET_QTY_INGREDIENTS","getIngredientItemsThunk","dispatch","payload","catch","TemplateConstructorElement","styleLi","templateConstructorElement","ConstructorList","memo","ingredientList","itemsWithoutBun","useMemo","filter","itemBun","uuid","uuidv4","incrementQtyBun","addIngredientToConstructor","incrementQtyIngredient","dropRef","removeItem","useCallback","elements","dragElement","splice","burgerconstructorList","burgerconstructorList__item","isLocked","text","price","thumbnail","image","burgerconstructorList__inner","length","burgerconstructorListOverflowHidden__inner","map","handleClose","ORDER_REQUEST","ORDER_SUCCESS","ORDER_FAILED","sendOrderThunk","idList","ingredients","sendOrderRequest","ErrorText","errorText","initialStateButton","count","BurgerConstructor","state","burgerConstructor","user","userInfo","history","useHistory","orderRequest","orderInfo","success","textButton","seTextButton","show","setShow","total","reduce","accumulator","element","idIngredientList","_id","orderNumber","number","orderFailed","handlerOrder","push","interval","setInterval","prevState","clearInterval","burgerConstructor__total","buttonOrder","disabled","size","Ingredient","qty","dragRef","card__prics","IngredientList","forwardRef","list","typeCard","location","filteredItems","cardStyle","card__list","background","textDecoration","color","card__listItem","BurgerIngredients","setCurrent","refBunDiv","refSauceDiv","refMainDiv","BUN","SAUCE","MAIN","burgerIngredients","handleTab","scrollIntoView","behavior","handlerScroll","scrollTop","target","posOfSectionBun","offsetTop","posOfSauceBun","display","active","onScroll","HomePage","burgerIngredientsFailed","main","DndProvider","backend","HTML5Backend","REGISTER_REQUEST","REGISTER_REQUEST_SUCCESS","REGISTER_REQUEST_FAILED","GET_CODE_RESET_PASSWORD_REQUEST","GET_CODE_RESET_PASSWORD_SUCCESS","GET_CODE_RESET_PASSWORD_FAILED","CONFIRM_RESET_PASSWORD_REQUEST","CONFIRM_RESET_PASSWORD_SUCCESS","CONFIRM_RESET_PASSWORD_FAILED","LOGIN_REQUEST","LOGIN_REQUEST_FAILED","LOGIN_REQUEST_SUCCESS","LOGOUT_REQUEST","LOGOUT_REQUEST_FAILED","LOGOUT_REQUEST_SUCCESS","GET_PROFILE_REQUEST","GET_PROFILE_REQUEST_FAILED","GET_PROFILE_REQUEST_SUCCESS","getProfileFailedAction","getProfileSuccessAction","registerThunk","registerRequest","resetPasswordThunk","resetPasswordRequest","confirmResetPassThunk","afterLogout","confirmResetPassRequest","updateProfileThunk","email","password","mode","updateProfileRequest","logoutThunk","LoginPage","store","setState","handleChange","from","mainColumn","form","fieldset","onChange","button","htmlType","preventDefault","registrationNav","registrationNav__item","link","RegisterPage","registerInfo","request","placeholder","ForgotPasswordPage","ResetPasswordPage","showPassword","setShowPassword","icon","onIconClick","preValue","setStyleActiveLink","link__active","SidebarMenu","links","sidebarMenu","sidebarMenu__item","path","ProfilePage","inputEmailRef","inputPassRef","inputNameRef","emailValue","nameValue","stateRef","handleIconClick","nameInput","onBlur","focus","onClickLogoutLink","handleUpdateProfile","handleCancelChange","profileStyles","main__container","wrapper","sidebarLeft","aboutProfilePage","button__group","ProtectedRoute","isUserLoaded","rest","render","IngredientDetails","useParams","ingredientInfo","find","ingredientDetails","image_large","ingredientDetails__nutritionalValue","ingredientDetails__nutritionaValueItem","ingredientDetails__nutritionaName","ingredientDetails__nutritionaCount","calories","proteins","fat","carbohydrates","IngredientPage","NotFoundPage","App","setUserLoaded","init","message","handelCloseModal","goBack","action","component","ingredientsInitialState","burgerIngredientsRequest","constructorInitialState","SET_INGREDIENT_DETAIL","INIT_INGREDIENT_DETAIL","ingredientDetailState","image_mobile","__v","orderInitState","userState","failedRequest","codePasswordInfo","confirmResetPass","loginInfo","getProfileInfo","logoutInfo","rootReducer","combineReducers","indexElement","findIndex","slice","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore","StrictMode"],"mappings":"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","file":"static/js/main.e01e85d0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"orderDetails\":\"order-details_orderDetails__2PoKE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__39kB-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"templateConstructorElement\":\"template-constructor-element_templateConstructorElement__8AUGz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorText\":\"error-text_errorText__1VnVo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card__prics\":\"ingredient_card__prics__1mWaG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerIngredients\":\"burger-ingredients_burgerIngredients__1p9CV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredientDetails\":\"ingredientDetails_ingredientDetails__6s4Tp\",\"ingredientDetails__title\":\"ingredientDetails_ingredientDetails__title__3ecJb\",\"ingredientDetails__nutritionalValue\":\"ingredientDetails_ingredientDetails__nutritionalValue__JbCpa\",\"ingredientDetails__nutritionaValueItem\":\"ingredientDetails_ingredientDetails__nutritionaValueItem__1b2Z0\"};","import {\r\n  Logo,\r\n  BurgerIcon,\r\n  ListIcon,\r\n  ProfileIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC, useEffect, useState } from \"react\";\r\nimport { NavLink, useLocation } from \"react-router-dom\";\r\nimport styles from \"./app-header.module.css\";\r\n\r\nconst setActive = (isActive: boolean) => {\r\n  return !isActive\r\n    ? styles.linkHeader\r\n    : styles.linkHeader__active + \" \" + styles.linkHeader;\r\n};\r\n\r\nconst AppHeader: FC = () => {\r\n  const { pathname } = useLocation();\r\n  const [activeIcon, setActiveIcon] = useState(\"\");\r\n  useEffect(() => {\r\n    switch (pathname) {\r\n      case \"/\":\r\n        setActiveIcon(\"home\");\r\n        break;\r\n      case \"/login\":\r\n        setActiveIcon(\"login\");\r\n        break;\r\n      case \"/profile\":\r\n        setActiveIcon(\"profile\");\r\n        break;\r\n      default:\r\n        setActiveIcon(\"\");\r\n    }\r\n  }, [pathname]);\r\n\r\n  return (\r\n    <header className={`pt-4 pb-4 ${styles.header}`}>\r\n      <div className={styles.headerContent}>\r\n        <nav className={`${styles.menu}`}>\r\n          <ul className={`${styles.menu__list}`}>\r\n            <li className={`pr-5 ${styles.menu__item}`}>\r\n              <NavLink\r\n                exact\r\n                to=\"/\"\r\n                className={setActive}\r\n                onClick={() => setActiveIcon(\"home\")}\r\n              >\r\n                <BurgerIcon\r\n                  type={activeIcon === \"home\" ? \"primary\" : \"secondary\"}\r\n                />\r\n                <p className=\"pl-2 text text_type_main-default\">Конструктор</p>\r\n              </NavLink>\r\n            </li>\r\n            <li className={`pl-5 pr-5 ${styles.menu__item}`}>\r\n              <NavLink\r\n                to=\"/login\"\r\n                className={setActive}\r\n                onClick={() => setActiveIcon(\"login\")}\r\n              >\r\n                <ListIcon\r\n                  type={activeIcon === \"login\" ? \"primary\" : \"secondary\"}\r\n                />\r\n                <p className=\"pl-2 text text_type_main-default\">\r\n                  Лента заказов\r\n                </p>\r\n              </NavLink>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n        <div className={styles.logo}>\r\n          <Logo />\r\n        </div>\r\n        <div className={styles.account}>\r\n          <NavLink to=\"/profile\" className={setActive}  onClick={() => setActiveIcon(\"profile\")}>\r\n            <ProfileIcon\r\n              type={activeIcon === \"profile\" ? \"primary\" : \"secondary\"}\r\n            />\r\n            <p className=\"pl-2 text text_type_main-default\">Личный кабинет</p>\r\n          </NavLink>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default AppHeader;\r\n","import {\r\n  TypedUseSelectorHook,\r\n  useDispatch as dispatchHook,\r\n  useSelector as selectorHook\r\n} from 'react-redux';\r\nimport { AppDispatch, AppThunk, RootState } from './types';\r\n\r\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;","export default __webpack_public_path__ + \"static/media/orderDone.2022ce2b.svg\";","import style from \"./order-details.module.css\";\r\nimport orderDone from \"../../images/orderDone.svg\";\r\nimport { FC } from \"react\";\r\nimport { TOrderDetails } from \"../../services/types/data\";\r\n\r\nconst OrderDetails: FC<TOrderDetails> = ({ order }) => {\r\n  return (\r\n    <div className={`${style.orderDetails} pt-30 pl-25 pr-25`}>\r\n      <h2 className=\"text text_type_digits-large pb-8\">{order}</h2>\r\n      <p className=\"pb-20 text text_type_main-medium\">идентификатор заказа</p>\r\n      <img className=\"pb-15\" src={orderDone} alt=\"Заказ Выполнен\" />\r\n      <p className=\"pb-2 text text_type_main-small\">\r\n        Ваш заказ начали готовить\r\n      </p>\r\n      <p className=\"pb-30 text text_type_main-small\">\r\n        Дождитесь готовности на орбитальной станции\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderDetails;\r\n","import styleModal from \"./modal-overlay.module.css\";\r\nimport { FC } from \"react\";\r\nimport { TModalOverlay } from \"../../services/types/data\";\r\n\r\nconst ModalOverlay: FC<TModalOverlay> = ({ children, onClose }) => {\r\n  return (\r\n    <div className={`${styleModal.overlay}`} onClick={onClose}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalOverlay;\r\n","import style from \"./modal.module.css\";\r\nimport ModalOverlay from \"../modal-overlay/modal-overlay\";\r\nimport { useEffect, FC } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { TModal } from \"../../services/types/data\";\r\n\r\nconst modalRoot  = document.getElementById(\"modal\") as HTMLDivElement;\r\n\r\nconst Modal: FC<TModal> = ({ title, onClose, children }) => {\r\n  useEffect(() => {\r\n    const closeOnEscape = (e: KeyboardEvent): void => {\r\n      if (e.key === \"Escape\") {\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener(\"keydown\", closeOnEscape);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", closeOnEscape);\r\n    };\r\n  }, []);\r\n\r\n  return ReactDOM.createPortal(\r\n    <ModalOverlay onClose={onClose}>\r\n      <div className={style.popup} onClick={(e) => e.stopPropagation()}>\r\n        {title && (\r\n          <h2\r\n            className={`${style.popup__title} text text_type_main-large pl-10 pr-10`}\r\n          >\r\n            {title}\r\n          </h2>\r\n        )}\r\n        {children}\r\n        <div className={style.popup__close} onClick={onClose}>\r\n          <CloseIcon type=\"primary\" />\r\n        </div>\r\n      </div>\r\n    </ModalOverlay>,\r\n    modalRoot\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import { DragIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC, useRef } from \"react\";\r\nimport { useDrag, useDrop } from \"react-dnd\";\r\nimport style from \"./constructor-item.module.css\";\r\nimport CSS from \"csstype\";\r\nimport { TIngredient, TConstructorItem } from \"../../services/types/data\";\r\n\r\nconst ConstructorItem: FC<TConstructorItem> = ({\r\n  children,\r\n  moveItem,\r\n  index,\r\n  id,\r\n}) => {\r\n  const ref = useRef(null);\r\n  const [{ isHover }, drop] = useDrop({\r\n    accept: \"constructorItem\",\r\n    collect: (monitor) => ({\r\n      isHover: monitor.isOver(),\r\n    }),\r\n    drop(item: TIngredient) {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n      const dragIndex = item.index!;\r\n      const hoverIndex = index;\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      }\r\n      moveItem(dragIndex, hoverIndex);\r\n      item.index = hoverIndex;\r\n    },\r\n  });\r\n  const [, drag] = useDrag({\r\n    type: \"constructorItem\",\r\n    item: () => {\r\n      return { id, index };\r\n    },\r\n  });\r\n  const styleHover: CSS.Properties | null = isHover\r\n    ? {\r\n        outline: \"3px solid #8b00ff\",\r\n        outlineOffset: \"-3px\",\r\n      }\r\n    : {};\r\n  drag(drop(ref));\r\n  return (\r\n    <li ref={ref} className={style.burgerConstructorList__innerItem}>\r\n      <DragIcon type=\"primary\" />\r\n      <div className={style.wrapperConstructorElement} style={styleHover}>\r\n        {children}\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ConstructorItem;\r\n","import { TIngredientWithUniqKey } from \"../types/data\";\r\n\r\nexport const ADD_INGREDIENT: \"ADD_INGREDIENT\" = \"ADD_INGREDIENT\";\r\nexport const ADD_BUN: \"ADD_BUN\" = \"ADD_BUN\";\r\nexport const DELETE_ITEM: \"DELETE_ITEM\" = \"DELETE_ITEM\";\r\nexport const REORDER_INGREDIENTS: \"REORDER_INGREDIENTS\" = \"REORDER_INGREDIENTS\";\r\nexport const SET_DEFAULT_VALUE_INGREDIENTS: \"SET_DEFAULT_VALUE_INGREDIENTS\" =\r\n  \"SET_DEFAULT_VALUE_INGREDIENTS\";\r\n\r\nexport interface IAddIngredientToConstructor {\r\n  readonly type: typeof ADD_INGREDIENT;\r\n  readonly payload: TIngredientWithUniqKey;\r\n}\r\n\r\nexport interface IAddBunToConstructor {\r\n  readonly type: typeof ADD_BUN;\r\n  readonly payload: TIngredientWithUniqKey;\r\n}\r\n\r\nexport interface IDeleteItemById {\r\n  readonly type: typeof DELETE_ITEM;\r\n  readonly id: string;\r\n}\r\n\r\nexport interface IReorderIngredients {\r\n  readonly type: typeof REORDER_INGREDIENTS;\r\n  payload: ReadonlyArray<TIngredientWithUniqKey>;\r\n}\r\n\r\nexport interface ISetDefaultValueIngredients {\r\n  readonly type: typeof SET_DEFAULT_VALUE_INGREDIENTS;\r\n}\r\n\r\nexport const addIngredientToConstructor = (\r\n  payload: TIngredientWithUniqKey\r\n): IAddIngredientToConstructor => ({\r\n  type: ADD_INGREDIENT,\r\n  payload,\r\n});\r\n\r\nexport const addBunToConstructor = (\r\n  payload: TIngredientWithUniqKey\r\n): IAddBunToConstructor => ({\r\n  type: ADD_BUN,\r\n  payload,\r\n});\r\n\r\nexport const deleteItemById = (id: string): IDeleteItemById => ({\r\n  type: DELETE_ITEM,\r\n  id,\r\n});\r\n\r\nexport const reorderIngredients = (\r\n  payload: ReadonlyArray<TIngredientWithUniqKey>\r\n): IReorderIngredients => ({\r\n  type: REORDER_INGREDIENTS,\r\n  payload,\r\n});\r\n\r\nexport const setDefaultValueIngredients = (): ISetDefaultValueIngredients => ({\r\n  type: SET_DEFAULT_VALUE_INGREDIENTS,\r\n});\r\n\r\nexport type TBurgerConstructorActions =\r\n  | IAddIngredientToConstructor\r\n  | IAddBunToConstructor\r\n  | IDeleteItemById\r\n  | IReorderIngredients\r\n  | ISetDefaultValueIngredients;\r\n","export const REFRESH_TOKEN: \"refresh_token\" = \"refresh_token\";\r\nexport const ACCESS_TOKEN: \"access_token\" = \"access_token\";\r\nexport const JWT_EXPIRED: \"jwt expired\" = \"jwt expired\";\r\n","export function setCookie(\r\n  name: string,\r\n  value: string,\r\n  props: { [key: string]: any } & { expires?: number | Date | string } = {}\r\n) {\r\n  console.log(value);\r\n  props = props || {};\r\n  let exp = props.expires;\r\n  if (typeof exp == \"number\" && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  }\r\n  if (exp && (exp as Date).toUTCString) {\r\n    props.expires = (exp as Date).toUTCString();\r\n  }\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + \"=\" + value;\r\n  for (const propName in props) {\r\n    updatedCookie += \"; \" + propName;\r\n    const propValue = props[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += \"=\" + propValue;\r\n    }\r\n  }\r\n  document.cookie = updatedCookie;\r\n}\r\n\r\nexport function deleteCookie(name: string) {\r\n  setCookie(name, \"\", { expires: -1 });\r\n}\r\n\r\nexport function getCookie(name: string): string | undefined {\r\n  const matches = document.cookie.match(\r\n    new RegExp(\r\n      \"(?:^|; )\" + name.replace(/([$?*|{}\\]\\\\^])/g, \"\\\\$1\") + \"=([^;]*)\"\r\n    )\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n","import { ACCESS_TOKEN, REFRESH_TOKEN } from \"./constant\";\r\nimport {\r\n  TGetCodeForResetPassRQ,\r\n  TIngredient,\r\n  TOrderSuccess,\r\n  TRegisterRequest,\r\n  TRegisterResponse,\r\n  TGetCodeForResetPassResponse,\r\n  TConfirmResetPassRQ,\r\n  TConfirmResetPassResponse,\r\n  TRefreshTokenResponse,\r\n  TLoginResponse,\r\n  TProfileResponse,\r\n  TLogoutResponse,\r\n  TUpdateProfileRq,\r\n} from \"./types/data\";\r\nimport { getCookie, setCookie } from \"./utils\";\r\n\r\nconst BASE_URL = \"https://norma.nomoreparties.space\";\r\n\r\nconst checkResponse = async (res: Response): Promise<any> => {\r\n  let json = await res.json();\r\n\r\n  if (res.ok) {\r\n    return json;\r\n  }\r\n  return json\r\n    ? Promise.reject({ ...json, status: res.status })\r\n    : Promise.reject({ status: res.status });\r\n};\r\n\r\nexport { BASE_URL, checkResponse };\r\n\r\nexport const getIngredientItemsRequest = (): Promise<{\r\n  data: ReadonlyArray<TIngredient>;\r\n}> => {\r\n  return fetch(`${BASE_URL}/api/ingredients`).then(checkResponse);\r\n};\r\n\r\nexport const sendOrderRequest = (\r\n  idList: ReadonlyArray<string>\r\n): Promise<TOrderSuccess> => {\r\n  return fetch(`${BASE_URL}/api/orders`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: \"Bearer \" + getCookie(ACCESS_TOKEN),\r\n    },\r\n    body: JSON.stringify({\r\n      ingredients: idList,\r\n    }),\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const registerRequest = (\r\n  data: Readonly<TRegisterRequest>\r\n): Promise<TRegisterResponse> => {\r\n  return fetch(`${BASE_URL}/api/auth/register`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({\r\n      ...data,\r\n    }),\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const resetPasswordRequest = (\r\n  data: Readonly<TGetCodeForResetPassRQ>\r\n): Promise<TGetCodeForResetPassResponse> => {\r\n  return fetch(`${BASE_URL}/api/password-reset`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({\r\n      ...data,\r\n    }),\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const confirmResetPassRequest = (\r\n  data: Readonly<TConfirmResetPassRQ>\r\n): Promise<TConfirmResetPassResponse> => {\r\n  return fetch(`${BASE_URL}/api/password-reset/reset`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({\r\n      ...data,\r\n    }),\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const refreshTokenRequest = (token: {\r\n  token: string;\r\n}): Promise<TRefreshTokenResponse> => {\r\n  return fetch(`${BASE_URL}/api/auth/token`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({\r\n      token,\r\n    }),\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const loginRequest = (data: {\r\n  email: string;\r\n  password: string;\r\n}): Promise<TLoginResponse> => {\r\n  return fetch(`${BASE_URL}/api/auth/login`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({\r\n      ...data,\r\n    }),\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const getProfileRequest = (): Promise<TProfileResponse> => {\r\n  return fetch(`${BASE_URL}/api/auth/user`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: \"Bearer \" + getCookie(ACCESS_TOKEN),\r\n    },\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const updateProfileRequest = ({\r\n  email,\r\n  password,\r\n  name,\r\n}: TUpdateProfileRq): Promise<TProfileResponse> => {\r\n  return fetch(`${BASE_URL}/api/auth/user`, {\r\n    method: \"PATCH\",\r\n    mode: \"cors\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: \"Bearer \" + getCookie(ACCESS_TOKEN),\r\n    },\r\n    body: JSON.stringify({\r\n      email,\r\n      password,\r\n      name,\r\n    }),\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const logoutRequest = (token: {\r\n  token: string;\r\n}): Promise<TLogoutResponse> => {\r\n  return fetch(`${BASE_URL}/api/auth/logout`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({\r\n      token,\r\n    }),\r\n  }).then(checkResponse);\r\n};\r\n\r\nexport const refreshTokenAndFetchRetry = async (callback: any) => {\r\n  let token = getCookie(REFRESH_TOKEN);\r\n  let responseJsonCallBack = null;\r\n  if (token) {\r\n    try {\r\n      const tokenJson = await refreshTokenRequest({ token });\r\n      if (tokenJson.accessToken) {\r\n        setCookie(ACCESS_TOKEN, tokenJson.accessToken.split(\"Bearer \")[1]);\r\n      }\r\n      if (tokenJson.refreshToken) {\r\n        setCookie(REFRESH_TOKEN, tokenJson.refreshToken);\r\n      }\r\n      responseJsonCallBack = await callback();\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n  return responseJsonCallBack;\r\n};\r\n","import { getIngredientItemsRequest } from \"../api\";\r\nimport { AppDispatch, AppThunk } from \"../types\";\r\nimport { TIngredient } from \"../types/data\";\r\n\r\nexport const BURGER_INGREDIENTS_REQUEST: \"BURGER_INGREDIENTS_REQUEST\" =\r\n  \"BURGER_INGREDIENTS_REQUEST\";\r\nexport const BURGER_INGREDIENTS_SUCCESS: \"BURGER_INGREDIENTS_SUCCESS\" =\r\n  \"BURGER_INGREDIENTS_SUCCESS\";\r\nexport const BURGER_INGREDIENTS_FAILED: \"BURGER_INGREDIENTS_FAILED\" =\r\n  \"BURGER_INGREDIENTS_FAILED\";\r\nexport const INCREMENT_INGREDIENTS: \"INCREMENT_INGREDIENTS\" =\r\n  \"INCREMENT_INGREDIENTS\";\r\nexport const INCREMENT_BUN: \"INCREMENT_BUN\" = \"INCREMENT_BUN\";\r\nexport const DECREMENT_INGREDIENTS: \"DECREMENT_INGREDIENTS\" =\r\n  \"DECREMENT_INGREDIENTS\";\r\nexport const RESET_QTY_INGREDIENTS: \"RESET_QTY_INGREDIENTS\" =\r\n  \"RESET_QTY_INGREDIENTS\";\r\n\r\nexport interface IReqIngredient {\r\n  readonly type: typeof BURGER_INGREDIENTS_REQUEST;\r\n}\r\n\r\nexport interface ISetIngredientsValue {\r\n  readonly type: typeof BURGER_INGREDIENTS_SUCCESS;\r\n  readonly payload: ReadonlyArray<TIngredient>;\r\n}\r\n\r\nexport interface ISetReqIngredientsFailed {\r\n  readonly type: typeof BURGER_INGREDIENTS_FAILED;\r\n}\r\n\r\nexport interface IIncrementQtyIngredient {\r\n  readonly type: typeof INCREMENT_INGREDIENTS;\r\n  readonly payload: TIngredient;\r\n}\r\n\r\nexport interface IIncrementQtyBunt {\r\n  readonly type: typeof INCREMENT_BUN;\r\n  readonly payload: TIngredient;\r\n}\r\n\r\nexport interface IDecrementQtyIngredients {\r\n  readonly type: typeof DECREMENT_INGREDIENTS;\r\n  readonly payload: TIngredient;\r\n}\r\n\r\nexport interface IResetQtyIngredients {\r\n  readonly type: typeof RESET_QTY_INGREDIENTS;\r\n}\r\n\r\nexport const reqIngredient = (): IReqIngredient => ({\r\n  type: BURGER_INGREDIENTS_REQUEST,\r\n});\r\n\r\nexport const setIngredientsValue = (\r\n  payload: ReadonlyArray<TIngredient>\r\n): ISetIngredientsValue => ({\r\n  type: BURGER_INGREDIENTS_SUCCESS,\r\n  payload,\r\n});\r\n\r\nexport const setReqIngredientsFailed = (): ISetReqIngredientsFailed => ({\r\n  type: BURGER_INGREDIENTS_FAILED,\r\n});\r\n\r\nexport const incrementQtyIngredient = (\r\n  payload: TIngredient\r\n): IIncrementQtyIngredient => ({\r\n  type: INCREMENT_INGREDIENTS,\r\n  payload,\r\n});\r\n\r\nexport const incrementQtyBun = (payload: TIngredient): IIncrementQtyBunt => ({\r\n  type: INCREMENT_BUN,\r\n  payload,\r\n});\r\n\r\nexport const decrementQtyIngredients = (\r\n  payload: TIngredient\r\n): IDecrementQtyIngredients => ({\r\n  type: DECREMENT_INGREDIENTS,\r\n  payload,\r\n});\r\n\r\nexport const resetQtyIngredients = (): IResetQtyIngredients => ({\r\n  type: RESET_QTY_INGREDIENTS,\r\n});\r\n\r\nexport const getIngredientItemsThunk: AppThunk = () => {\r\n  return function (dispatch: AppDispatch) {\r\n    dispatch(reqIngredient());\r\n    getIngredientItemsRequest()\r\n      .then((res) => {\r\n        dispatch(setIngredientsValue(res.data));\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n        dispatch(setReqIngredientsFailed());\r\n      });\r\n  };\r\n};\r\n\r\nexport type TBurgerIngredientsActions =\r\n  | IReqIngredient\r\n  | ISetIngredientsValue\r\n  | ISetReqIngredientsFailed\r\n  | IIncrementQtyIngredient\r\n  | IIncrementQtyBunt\r\n  | IDecrementQtyIngredients\r\n  | IResetQtyIngredients;\r\n","import style from \"./template-constructor-element.module.css\";\r\nimport styleLi from \"../constructor-item/constructor-item.module.css\";\r\nimport { FC } from \"react\";\r\nconst TemplateConstructorElement: FC = () => {\r\n  return (\r\n    <li className={styleLi.burgerConstructorList__innerItem}>\r\n      <p\r\n        className={`${style.templateConstructorElement} text text_type_digits-medium pr-2`}\r\n      >\r\n        Перетащите сюда ингредиенты\r\n      </p>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default TemplateConstructorElement;\r\n","import { useDrop } from \"react-dnd\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { FC, useCallback, useMemo, memo } from \"react\";\r\nimport style from \"./constructor-list.module.css\";\r\nimport { ConstructorElement } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport ConstructorItem from \"../constructor-item/constructor-item\";\r\nimport {\r\n  addIngredientToConstructor,\r\n  addBunToConstructor,\r\n  deleteItemById,\r\n  reorderIngredients,\r\n} from \"../../services/action/burger-constructor\";\r\nimport {\r\n  decrementQtyIngredients,\r\n  incrementQtyBun,\r\n  incrementQtyIngredient,\r\n} from \"../../services/action/burger-ingredients\";\r\nimport TemplateConstructorElement from \"../template-constructor-element/template-constructor-element\";\r\nimport { TIngredientWithUniqKey } from \"../../services/types/data\";\r\nimport { useDispatch } from \"../../services/hooks\";\r\n\r\nconst POSTIX_NAME_BUN_TOP = \"(верх)\";\r\nconst POSTIX_NAME_BUN_BUTTOM = \"(низ)\";\r\n\r\nconst ConstructorList: FC<{\r\n  ingredientList: Array<TIngredientWithUniqKey>;\r\n}> = memo(({ ingredientList }) => {\r\n  const itemsWithoutBun = useMemo(\r\n    () => ingredientList.filter((item) => item.type !== \"bun\"),\r\n    [ingredientList]\r\n  );\r\n\r\n  const [itemBun] = useMemo(\r\n    () => ingredientList.filter((item) => item.type === \"bun\"),\r\n    [ingredientList]\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n  const [, dropRef] = useDrop({\r\n    accept: \"ingredient\",\r\n    drop(item: TIngredientWithUniqKey) {\r\n      if (item.type === \"bun\") {\r\n        dispatch(addBunToConstructor({ ...item, uuid: uuidv4() }));\r\n        dispatch(incrementQtyBun(item));\r\n      } else {\r\n        dispatch(addIngredientToConstructor({ ...item, uuid: uuidv4() }));\r\n        dispatch(incrementQtyIngredient(item));\r\n      }\r\n    },\r\n  });\r\n\r\n  const removeItem = useCallback((item: TIngredientWithUniqKey) => {\r\n    dispatch(deleteItemById(item.uuid));\r\n    dispatch(decrementQtyIngredients(item));\r\n  }, []);\r\n\r\n  const moveItem = useCallback(\r\n    (dragIndex, hoverIndex) => {\r\n      let elements = ingredientList;\r\n      // В стейсте у нас всегда первый элемент массива булка\r\n      // Если  булка добавлена, то мы должны сделать инкремент индексов\r\n      // Т.к. у нас единый массив хранения индегриентов,\r\n      // И если в массиве будет bun, и мы будем перетаскивать индегриенд\r\n      // То в стейте будет меняться булка и первый индегриент, вместо того, что бы поменять два индегриента между собой\r\n      // Либо использовать такой костыль, или хранить булки отдельно\r\n      if (ingredientList[0].type === \"bun\") {\r\n        dragIndex += 1;\r\n        hoverIndex += 1;\r\n      }\r\n      const dragElement = ingredientList[dragIndex];\r\n      elements.splice(dragIndex, 1);\r\n      elements.splice(hoverIndex, 0, dragElement);\r\n      dispatch(reorderIngredients(elements));\r\n    },\r\n    [ingredientList]\r\n  );\r\n  return (\r\n    <ul className={`pt-25 ${style.burgerconstructorList}`} ref={dropRef}>\r\n      {itemBun && (\r\n        <li className={style.burgerconstructorList__item}>\r\n          <ConstructorElement\r\n            type=\"top\"\r\n            isLocked={true}\r\n            text={`${itemBun.name} ${POSTIX_NAME_BUN_TOP}`}\r\n            price={itemBun.price}\r\n            thumbnail={itemBun.image}\r\n          />\r\n        </li>\r\n      )}\r\n\r\n      <ul\r\n        className={`${style.burgerconstructorList__inner} ${\r\n          ingredientList.length === 0\r\n            ? style.burgerconstructorListOverflowHidden__inner\r\n            : \"\"\r\n        }`}\r\n      >\r\n        {itemsWithoutBun.map((item, index) => (\r\n          <ConstructorItem\r\n            key={item.uuid}\r\n            index={index}\r\n            moveItem={moveItem}\r\n            id={item.uuid}\r\n          >\r\n            <ConstructorElement\r\n              text={item.name}\r\n              price={item.price}\r\n              thumbnail={item.image}\r\n              handleClose={() => {\r\n                removeItem(item);\r\n              }}\r\n            />\r\n          </ConstructorItem>\r\n        ))}\r\n        {ingredientList.length === 0 ? <TemplateConstructorElement /> : null}\r\n      </ul>\r\n      {itemBun && (\r\n        <li className={style.burgerconstructorList__item}>\r\n          <ConstructorElement\r\n            type=\"bottom\"\r\n            isLocked={true}\r\n            text={`${itemBun.name} ${POSTIX_NAME_BUN_BUTTOM}`}\r\n            price={itemBun.price}\r\n            thumbnail={itemBun.image}\r\n          />\r\n        </li>\r\n      )}\r\n    </ul>\r\n  );\r\n});\r\n\r\nexport default ConstructorList;\r\n","import { sendOrderRequest } from \"../api\";\r\nimport { AppDispatch, AppThunk } from \"../types\";\r\nimport { TOrderSuccess } from \"../types/data\";\r\n\r\nexport const ORDER_REQUEST: \"ORDER_REQUEST\" = \"ORDER_REQUEST\";\r\nexport const ORDER_SUCCESS: \"ORDER_SUCCESS\" = \"ORDER_SUCCESS\";\r\nexport const ORDER_FAILED: \"ORDER_FAILED\" = \"ORDER_FAILED\";\r\n\r\nexport interface IReqOrder {\r\n  readonly type: typeof ORDER_REQUEST;\r\n}\r\n\r\nexport interface ISetInfoOrder {\r\n  readonly type: typeof ORDER_SUCCESS;\r\n  readonly payload: TOrderSuccess;\r\n}\r\n\r\nexport interface ISetReqOrderFailed {\r\n  readonly type: typeof ORDER_FAILED;\r\n}\r\n\r\nexport const reqOrder = (): IReqOrder => ({\r\n  type: ORDER_REQUEST,\r\n});\r\n\r\nexport const setInfoOrder = (payload: TOrderSuccess): ISetInfoOrder => ({\r\n  type: ORDER_SUCCESS,\r\n  payload,\r\n});\r\n\r\nexport const setReqOrderFailed = (): ISetReqOrderFailed => ({\r\n  type: ORDER_FAILED,\r\n});\r\n\r\nexport const sendOrderThunk: AppThunk = (idList: ReadonlyArray<string>) => {\r\n  return function (dispatch: AppDispatch) {\r\n    dispatch(reqOrder());\r\n    sendOrderRequest(idList)\r\n      .then((res) => {\r\n        dispatch(setInfoOrder(res));\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n        dispatch(setReqOrderFailed());\r\n      });\r\n  };\r\n};\r\n\r\nexport type TOrderDetailsActions =\r\n  | IReqOrder\r\n  | ISetInfoOrder\r\n  | ISetReqOrderFailed;\r\n","import styles from \"./error-text.module.css\";\r\nimport {FC} from 'react'\r\nimport { TErrorText } from \"../../services/types/data\";\r\n\r\nconst ErrorText:FC<TErrorText> =  ({ text }) =>{\r\n  return (\r\n    <div className={styles.errorText}>\r\n      <p className=\"text text_type_digits-medium\">{text}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ErrorText;\r\n","import {\r\n  Button,\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport style from \"./burger-constructor.module.css\";\r\nimport OrderDetails from \"../order-details/order-details\";\r\nimport Modal from \"../modal/modal\";\r\nimport { useState, useMemo, useEffect, FC, useCallback } from \"react\";\r\nimport ConstructorList from \"../constructor-list/constructor-list\";\r\nimport { useDispatch, useSelector } from \"../../services/hooks\";\r\nimport { sendOrderThunk } from \"../../services/action/order-details\";\r\nimport { setDefaultValueIngredients } from \"../../services/action/burger-constructor\";\r\nimport { resetQtyIngredients } from \"../../services/action/burger-ingredients\";\r\nimport ErrorText from \"../error-text/error-text\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst initialStateButton = {\r\n  text: \"Оформить заказ\",\r\n  count: 3,\r\n};\r\n\r\nconst BurgerConstructor: FC = () => {\r\n  const { ingredients } = useSelector((state) => state.burgerConstructor);\r\n  const { user } = useSelector((state) => state.userInfo);\r\n  const history = useHistory();\r\n  const { orderRequest } = useSelector((state) => state.orderInfo);\r\n  const { success } = useSelector((state) => state.orderInfo);\r\n  const [textButton, seTextButton] = useState(initialStateButton);\r\n\r\n  const [show, setShow] = useState(false);\r\n  const total = useMemo(() => {\r\n    return ingredients.reduce((accumulator, element) => {\r\n      return element.type !== \"bun\"\r\n        ? (accumulator += element.price)\r\n        : (accumulator += element.price * 2);\r\n    }, 0);\r\n  }, [ingredients]);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const idIngredientList = useSelector((state) => {\r\n    const listIngredients = state.burgerConstructor.ingredients;\r\n    const idList = listIngredients.map((item) => {\r\n      return item._id;\r\n    });\r\n\r\n    return idList;\r\n  });\r\n\r\n  const orderNumber = useSelector((state) => state.orderInfo.order.number);\r\n  const orderFailed = useSelector((state) => state.orderInfo.orderFailed);\r\n\r\n  const handlerOrder = useCallback(() => {\r\n    if (!user) {\r\n      history.push({\r\n        pathname: \"/login\",\r\n      });\r\n      return;\r\n    }\r\n    setShow(true);\r\n    dispatch(sendOrderThunk(idIngredientList));\r\n  }, [dispatch, ingredients]);\r\n\r\n  useEffect(() => {\r\n    let interval: any = null;\r\n    if (orderRequest) {\r\n      seTextButton({\r\n        text: \"Ждите\",\r\n        count: initialStateButton.count,\r\n      });\r\n      interval = setInterval(() => {\r\n        seTextButton((prevState) => ({\r\n          count:\r\n            prevState.count === 0\r\n              ? initialStateButton.count\r\n              : prevState.count - 1,\r\n          text: prevState.count === 0 ? \"Ждите\" : prevState.text + \".\",\r\n        }));\r\n      }, 1000);\r\n    } else {\r\n      seTextButton(initialStateButton);\r\n    }\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, [orderRequest]);\r\n\r\n  return (\r\n    <section className={`${style.burgerConstructor} pl-4 pr-4`}>\r\n      <ConstructorList ingredientList={ingredients} />\r\n      {orderFailed ? <ErrorText text={\"Ошибка при оформлении заказа\"} /> : null}\r\n      <div className={style.burgerConstructor__total}>\r\n        <p className=\"text text_type_digits-medium pr-2\">{total}</p>\r\n        <CurrencyIcon type=\"primary\" />\r\n        <div className={`${style.buttonOrder} pl-10`}>\r\n          <Button\r\n            disabled={!total || orderRequest}\r\n            onClick={handlerOrder}\r\n            type=\"primary\"\r\n            size=\"large\"\r\n          >\r\n            {textButton.text}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {success && show && (\r\n        <Modal\r\n          onClose={() => {\r\n            setShow(false);\r\n            dispatch(setDefaultValueIngredients());\r\n            dispatch(resetQtyIngredients());\r\n          }}\r\n        >\r\n          <OrderDetails order={orderNumber} />\r\n        </Modal>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default BurgerConstructor;\r\n","import {\r\n  CurrencyIcon,\r\n  Counter,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDrag } from \"react-dnd\";\r\nimport styles from \"./ingredient.module.css\";\r\nimport { FC, memo } from \"react\";\r\nimport { TIngredient } from \"../../services/types/data\";\r\n\r\nconst Ingredient: FC<{ data: TIngredient }> = memo(({ data }) => {\r\n  const { image, name, price, qty } = data;\r\n\r\n  const [, dragRef] = useDrag({\r\n    type: \"ingredient\",\r\n    item: data,\r\n  });\r\n  return (\r\n    <div ref={dragRef}>\r\n      {qty && <Counter count={qty} size=\"default\" />}\r\n      <img src={image} alt={name} className=\"pl-4 pb-1 pr-4\" />\r\n      <div className={styles.card__prics}>\r\n        <p className=\"text text_type_digits-default pb-1 pr-2\">{price}</p>\r\n        <CurrencyIcon type=\"primary\" />\r\n      </div>\r\n      <p className=\"pt-2 text text_type_main-default\">{name}</p>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Ingredient;\r\n","import cardStyle from \"./ingredientList.module.css\";\r\nimport { forwardRef, useMemo, memo } from \"react\";\r\n\r\nimport Ingredient from \"../ingredient/ingredient\";\r\nimport { TIngredientList } from \"../../services/types/data\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\n\r\nconst IngredientList = memo(\r\n  forwardRef<HTMLDivElement, TIngredientList>(\r\n    ({ list, typeCard, title }, ref) => {\r\n      const location = useLocation();\r\n\r\n      const filteredItems = useMemo(\r\n        () => list.filter((element) => element.type === typeCard),\r\n        [list]\r\n      );\r\n\r\n      return (\r\n        <div ref={ref}>\r\n          <h2 className=\"text text_type_main-medium pb-6\">{title}</h2>\r\n          <ul className={`pl-4 pb-10 ${cardStyle.card__list}`}>\r\n            {filteredItems.map((item) => (\r\n              <Link\r\n                key={item._id}\r\n                to={{\r\n                  pathname: `/ingredients/${item._id}`,\r\n                  state: { background: location },\r\n                }}\r\n                style={{ textDecoration: \"none\", color: \"#fff\" }}\r\n              >\r\n                <li key={item._id} className={cardStyle.card__listItem}>\r\n                  <Ingredient data={item} />\r\n                </li>\r\n              </Link>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      );\r\n    }\r\n  )\r\n);\r\n\r\nexport default IngredientList;\r\n","import { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport React, { useState, useRef, FC, useCallback } from \"react\";\r\nimport IngredientList from \"../ingredient-list/IngredientList\";\r\nimport style from \"./burger-ingredients.module.css\";\r\nimport { useDispatch, useSelector } from \"../../services/hooks\";\r\nimport { TIngredientType } from \"../../services/types/data\";\r\nimport { RefObject } from \"react-dom/node_modules/@types/react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst BurgerIngredients: FC = () => {\r\n  const [current, setCurrent] = useState<TIngredientType>(\"bun\");\r\n  const refBunDiv = useRef<HTMLDivElement>(null);\r\n  const refSauceDiv = useRef<HTMLDivElement>(null);\r\n  const refMainDiv = useRef<HTMLDivElement>(null);\r\n\r\n  const BUN: TIngredientType = \"bun\";\r\n  const SAUCE: TIngredientType = \"sauce\";\r\n  const MAIN: TIngredientType = \"main\";\r\n\r\n  const { burgerIngredients } = useSelector((state) => state.burgerIngredients);\r\n\r\n  const handleTab = useCallback(\r\n    (value: TIngredientType, element: RefObject<HTMLElement>) => {\r\n      setCurrent(value);\r\n      element?.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    },\r\n    []\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const handlerScroll: React.EventHandler<React.UIEvent<HTMLDivElement>> =\r\n    useCallback((e: React.UIEvent<HTMLElement>) => {\r\n      if (refBunDiv.current === null || refSauceDiv.current === null) return;\r\n      const scrollTop = (e.target as HTMLElement).scrollTop;\r\n      const posOfSectionBun = refBunDiv.current.offsetTop;\r\n      const posOfSauceBun = refSauceDiv.current.offsetTop;\r\n      if (scrollTop + 40 <= posOfSectionBun) {\r\n        setCurrent(BUN);\r\n      } else if (scrollTop - 170 <= posOfSauceBun) {\r\n        setCurrent(SAUCE);\r\n      } else {\r\n        setCurrent(MAIN);\r\n      }\r\n    }, []);\r\n\r\n  return (\r\n    <section>\r\n      <h1 className=\"text text_type_main-large pt-10 pb-5\">Соберите бургер</h1>\r\n      <div style={{ display: \"flex\" }}>\r\n        <Tab\r\n          value={BUN}\r\n          active={current === BUN}\r\n          onClick={() => {\r\n            handleTab(BUN, refBunDiv);\r\n          }}\r\n        >\r\n          Булки\r\n        </Tab>\r\n        <Tab\r\n          value={SAUCE}\r\n          active={current === SAUCE}\r\n          onClick={() => {\r\n            handleTab(SAUCE, refSauceDiv);\r\n          }}\r\n        >\r\n          Соусы\r\n        </Tab>\r\n        <Tab\r\n          value={MAIN}\r\n          active={current === MAIN}\r\n          onClick={() => {\r\n            handleTab(MAIN, refMainDiv);\r\n          }}\r\n        >\r\n          Начинки\r\n        </Tab>\r\n      </div>\r\n      <div\r\n        className={`${style.burgerIngredients} mt-10`}\r\n        onScroll={handlerScroll}\r\n      >\r\n        <IngredientList\r\n          list={burgerIngredients}\r\n          typeCard=\"bun\"\r\n          title=\"Булки\"\r\n          ref={refBunDiv}\r\n        />\r\n        <IngredientList\r\n          list={burgerIngredients}\r\n          typeCard=\"sauce\"\r\n          title=\"Соусы\"\r\n          ref={refSauceDiv}\r\n        />\r\n        <IngredientList\r\n          list={burgerIngredients}\r\n          typeCard=\"main\"\r\n          title=\"Начинки\"\r\n          ref={refMainDiv}\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default BurgerIngredients;\r\n","import { FC } from \"react\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport {  useSelector } from \"../services/hooks\";\r\nimport BurgerConstructor from \"../components/burger-constructor/burger-constructor\";\r\nimport BurgerIngredients from \"../components/burger-ingredients/burger-ingredients\";\r\nimport ErrorText from \"../components/error-text/error-text\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport styles from \"./home.module.css\";\r\n\r\nconst HomePage: FC = () => {\r\n  const { burgerIngredientsFailed } = useSelector(\r\n    (state) => state.burgerIngredients\r\n  );\r\n\r\n  return (\r\n    <main className={styles.main}>\r\n      <DndProvider backend={HTML5Backend}>\r\n        {burgerIngredientsFailed !== true ? (\r\n          <>\r\n            <BurgerIngredients />\r\n            <BurgerConstructor />\r\n          </>\r\n        ) : (\r\n          <ErrorText text={\"Что-то пошло не так\"} />\r\n        )}\r\n      </DndProvider>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import {\r\n  confirmResetPassRequest,\r\n  getProfileRequest,\r\n  loginRequest,\r\n  logoutRequest,\r\n  refreshTokenAndFetchRetry,\r\n  refreshTokenRequest,\r\n  registerRequest,\r\n  resetPasswordRequest,\r\n  updateProfileRequest,\r\n} from \"../api\";\r\nimport { ACCESS_TOKEN, JWT_EXPIRED, REFRESH_TOKEN } from \"../constant\";\r\nimport { AppDispatch, AppThunk } from \"../types\";\r\nimport {\r\n  TConfirmResetPassRQ,\r\n  TConfirmResetPassResponse,\r\n  TGetCodeForResetPassRQ,\r\n  TGetCodeForResetPassResponse,\r\n  TProfileResponse,\r\n  TLoginResponse,\r\n  TLogoutResponse,\r\n  TRefreshTokenResponse,\r\n  TRegisterRequest,\r\n  TRegisterResponse,\r\n  TUpdateProfileRq,\r\n} from \"../types/data\";\r\nimport { deleteCookie, setCookie } from \"../utils\";\r\n\r\nexport const REGISTER_REQUEST: \"REGISTER_REQUEST\" = \"REGISTER_REQUEST\";\r\nexport const REGISTER_REQUEST_SUCCESS: \"REGISTER_REQUEST_SUCCESS\" =\r\n  \"REGISTER_REQUEST_SUCCESS\";\r\nexport const REGISTER_REQUEST_FAILED: \"REGISTER_REQUEST_FAILED\" =\r\n  \"REGISTER_REQUEST_FAILED\";\r\nexport const GET_CODE_RESET_PASSWORD_REQUEST: \"GET_CODE_RESET_PASSWORD_REQUEST\" =\r\n  \"GET_CODE_RESET_PASSWORD_REQUEST\";\r\nexport const GET_CODE_RESET_PASSWORD_SUCCESS: \"GET_CODE_RESET_PASSWORD_SUCCESS\" =\r\n  \"GET_CODE_RESET_PASSWORD_SUCCESS\";\r\nexport const GET_CODE_RESET_PASSWORD_FAILED: \"GET_CODE_RESET_PASSWORD_FAILED\" =\r\n  \"GET_CODE_RESET_PASSWORD_FAILED\";\r\nexport const CONFIRM_RESET_PASSWORD_REQUEST: \"CONFIRM_RESET_PASSWORD_REQUEST\" =\r\n  \"CONFIRM_RESET_PASSWORD_REQUEST\";\r\nexport const CONFIRM_RESET_PASSWORD_SUCCESS: \"CONFIRM_RESET_PASSWORD_SUCCESS\" =\r\n  \"CONFIRM_RESET_PASSWORD_SUCCESS\";\r\nexport const CONFIRM_RESET_PASSWORD_FAILED: \"CONFIRM_RESET_PASSWORD_FAILED\" =\r\n  \"CONFIRM_RESET_PASSWORD_FAILED\";\r\n\r\nexport const REFRESH_TOKEN_REQUEST: \"REFRESH_TOKEN_REQUEST\" =\r\n  \"REFRESH_TOKEN_REQUEST\";\r\nexport const REFRESH_TOKEN_REQUEST_FAILED: \"REFRESH_TOKEN_REQUEST_FAILED\" =\r\n  \"REFRESH_TOKEN_REQUEST_FAILED\";\r\nexport const REFRESH_TOKEN_REQUEST_SUCCESS: \"REFRESH_TOKEN_REQUEST_SUCCESS\" =\r\n  \"REFRESH_TOKEN_REQUEST_SUCCESS\";\r\n\r\nexport const LOGIN_REQUEST: \"LOGIN_REQUEST\" = \"LOGIN_REQUEST\";\r\nexport const LOGIN_REQUEST_FAILED: \"LOGIN_REQUEST_FAILED\" =\r\n  \"LOGIN_REQUEST_FAILED\";\r\nexport const LOGIN_REQUEST_SUCCESS: \"LOGIN_REQUEST_SUCCESS\" =\r\n  \"LOGIN_REQUEST_SUCCESS\";\r\n\r\nexport const LOGOUT_REQUEST: \"LOGOUT_REQUEST\" = \"LOGOUT_REQUEST\";\r\nexport const LOGOUT_REQUEST_FAILED: \"LOGOUT_REQUEST_FAILED\" =\r\n  \"LOGOUT_REQUEST_FAILED\";\r\nexport const LOGOUT_REQUEST_SUCCESS: \"LOGOUT_REQUEST_SUCCESS\" =\r\n  \"LOGOUT_REQUEST_SUCCESS\";\r\n\r\nexport const GET_PROFILE_REQUEST: \"GET_PROFILE_REQUEST\" = \"GET_PROFILE_REQUEST\";\r\nexport const GET_PROFILE_REQUEST_FAILED: \"GET_PROFILE_REQUEST_FAILED\" =\r\n  \"GET_PROFILE_REQUEST_FAILED\";\r\nexport const GET_PROFILE_REQUEST_SUCCESS: \"GET_PROFILE_REQUEST_SUCCESS\" =\r\n  \"GET_PROFILE_REQUEST_SUCCESS\";\r\n\r\nexport const UPDATE_PROFILE_REQUEST: \"UPDATE_PROFILE_REQUEST\" =\r\n  \"UPDATE_PROFILE_REQUEST\";\r\nexport const UPDATE_PROFILE_REQUEST_FAILED: \"UPDATE_PROFILE_REQUEST_FAILED\" =\r\n  \"UPDATE_PROFILE_REQUEST_FAILED\";\r\nexport const UPDATE_PROFILE_REQUEST_SUCCESS: \"UPDATE_PROFILE_REQUEST_SUCCESS\" =\r\n  \"UPDATE_PROFILE_REQUEST_SUCCESS\";\r\n\r\n/*\r\n  Register \r\n*/\r\nexport interface IRegisterAction {\r\n  readonly type: typeof REGISTER_REQUEST;\r\n}\r\n\r\nexport interface IRegisterFailedAction {\r\n  readonly type: typeof REGISTER_REQUEST_FAILED;\r\n}\r\n\r\nexport interface IRegisterSuccessAction {\r\n  readonly type: typeof REGISTER_REQUEST_SUCCESS;\r\n  readonly payload: TRegisterResponse;\r\n}\r\n\r\nexport const sendRqRegister = (): IRegisterAction => ({\r\n  type: REGISTER_REQUEST,\r\n});\r\n\r\nexport const registerFailed = (): IRegisterFailedAction => ({\r\n  type: REGISTER_REQUEST_FAILED,\r\n});\r\n\r\nexport const setUserInfo = (\r\n  payload: TRegisterResponse\r\n): IRegisterSuccessAction => ({\r\n  type: REGISTER_REQUEST_SUCCESS,\r\n  payload,\r\n});\r\n\r\n/*\r\n  GetCodeForResetPass\r\n*/\r\nexport interface IGetCodeResetPassAction {\r\n  readonly type: typeof GET_CODE_RESET_PASSWORD_REQUEST;\r\n}\r\n\r\nexport interface IGetCodeResetPassFailedAction {\r\n  readonly type: typeof GET_CODE_RESET_PASSWORD_FAILED;\r\n}\r\n\r\nexport interface IGetCodeResetPassSuccessAction {\r\n  readonly type: typeof GET_CODE_RESET_PASSWORD_SUCCESS;\r\n  readonly payload: TGetCodeForResetPassResponse;\r\n}\r\n\r\nexport const sendRqGetCodeForResetPass = (): IGetCodeResetPassAction => ({\r\n  type: GET_CODE_RESET_PASSWORD_REQUEST,\r\n});\r\n\r\nexport const getCodeForResetPassFailed = (): IGetCodeResetPassFailedAction => ({\r\n  type: GET_CODE_RESET_PASSWORD_FAILED,\r\n});\r\n\r\nexport const setResGetCodeForResetPass = (\r\n  payload: TGetCodeForResetPassResponse\r\n): IGetCodeResetPassSuccessAction => ({\r\n  type: GET_CODE_RESET_PASSWORD_SUCCESS,\r\n  payload,\r\n});\r\n\r\n/*\r\n  ConfirmResetPass  \r\n*/\r\nexport interface IConfirmResetAction {\r\n  readonly type: typeof CONFIRM_RESET_PASSWORD_REQUEST;\r\n}\r\n\r\nexport interface IConfirmResetPassActionFailed {\r\n  readonly type: typeof CONFIRM_RESET_PASSWORD_FAILED;\r\n}\r\n\r\nexport interface IConfirmResetPassActionSuccess {\r\n  readonly type: typeof CONFIRM_RESET_PASSWORD_SUCCESS;\r\n  readonly payload: TConfirmResetPassResponse;\r\n}\r\n\r\nexport const confirmResetPassRq = (): IConfirmResetAction => ({\r\n  type: CONFIRM_RESET_PASSWORD_REQUEST,\r\n});\r\n\r\nexport const confirmResetPassFailed = (): IConfirmResetPassActionFailed => ({\r\n  type: CONFIRM_RESET_PASSWORD_FAILED,\r\n});\r\n\r\nexport const setResConfirmResetPass = (\r\n  payload: TConfirmResetPassResponse\r\n): IConfirmResetPassActionSuccess => ({\r\n  type: CONFIRM_RESET_PASSWORD_SUCCESS,\r\n  payload,\r\n});\r\n\r\n/*\r\n  refreshToken\r\n*/\r\nexport interface IRefreshAction {\r\n  readonly type: typeof REFRESH_TOKEN_REQUEST;\r\n}\r\n\r\nexport interface IRefreshFailedAction {\r\n  readonly type: typeof REFRESH_TOKEN_REQUEST_FAILED;\r\n}\r\n\r\nexport interface IRefreshSuccessAction {\r\n  readonly type: typeof REFRESH_TOKEN_REQUEST_SUCCESS;\r\n  readonly payload: TRefreshTokenResponse;\r\n}\r\n\r\nexport const refreshTokenAction = (): IRefreshAction => ({\r\n  type: REFRESH_TOKEN_REQUEST,\r\n});\r\n\r\nexport const refreshTokenFailedAction = (): IRefreshFailedAction => ({\r\n  type: REFRESH_TOKEN_REQUEST_FAILED,\r\n});\r\n\r\nexport const refreshTokenSuccessAction = (\r\n  payload: TRefreshTokenResponse\r\n): IRefreshSuccessAction => ({\r\n  type: REFRESH_TOKEN_REQUEST_SUCCESS,\r\n  payload,\r\n});\r\n\r\n/*\r\n  Login\r\n*/\r\nexport interface ILoginAction {\r\n  readonly type: typeof LOGIN_REQUEST;\r\n}\r\n\r\nexport interface ILoginFailedAction {\r\n  readonly type: typeof LOGIN_REQUEST_FAILED;\r\n}\r\n\r\nexport interface ILoginSuccessAction {\r\n  readonly type: typeof LOGIN_REQUEST_SUCCESS;\r\n  readonly payload: TLoginResponse;\r\n}\r\n\r\nexport const loginAction = (): ILoginAction => ({\r\n  type: LOGIN_REQUEST,\r\n});\r\n\r\nexport const loginFailedAction = (): ILoginFailedAction => ({\r\n  type: LOGIN_REQUEST_FAILED,\r\n});\r\n\r\nexport const loginSuccessAction = (\r\n  payload: TLoginResponse\r\n): ILoginSuccessAction => ({\r\n  type: LOGIN_REQUEST_SUCCESS,\r\n  payload,\r\n});\r\n\r\n/*\r\n  Logout\r\n*/\r\nexport interface ILogoutAction {\r\n  readonly type: typeof LOGOUT_REQUEST;\r\n}\r\n\r\nexport interface ILogoutFailedAction {\r\n  readonly type: typeof LOGOUT_REQUEST_FAILED;\r\n}\r\n\r\nexport interface ILogoutSuccessAction {\r\n  readonly type: typeof LOGOUT_REQUEST_SUCCESS;\r\n  readonly payload: TLogoutResponse;\r\n}\r\n\r\nexport const logoutAction = (): ILogoutAction => ({\r\n  type: LOGOUT_REQUEST,\r\n});\r\n\r\nexport const logoutFailedAction = (): ILogoutFailedAction => ({\r\n  type: LOGOUT_REQUEST_FAILED,\r\n});\r\n\r\nexport const logoutSuccessAction = (\r\n  payload: TLogoutResponse\r\n): ILogoutSuccessAction => ({\r\n  type: LOGOUT_REQUEST_SUCCESS,\r\n  payload,\r\n});\r\n\r\n/*\r\n  Profile\r\n*/\r\nexport interface IGetProfileAction {\r\n  readonly type: typeof GET_PROFILE_REQUEST;\r\n}\r\n\r\nexport interface IGetProfileFailedAction {\r\n  readonly type: typeof GET_PROFILE_REQUEST_FAILED;\r\n}\r\n\r\nexport interface IGetProfileSuccessAction {\r\n  readonly type: typeof GET_PROFILE_REQUEST_SUCCESS;\r\n  readonly payload: TProfileResponse;\r\n}\r\n\r\nexport const getProfileAction = (): IGetProfileAction => ({\r\n  type: GET_PROFILE_REQUEST,\r\n});\r\n\r\nexport const getProfileFailedAction = (): IGetProfileFailedAction => ({\r\n  type: GET_PROFILE_REQUEST_FAILED,\r\n});\r\n\r\nexport const getProfileSuccessAction = (\r\n  payload: TProfileResponse\r\n): IGetProfileSuccessAction => ({\r\n  type: GET_PROFILE_REQUEST_SUCCESS,\r\n  payload,\r\n});\r\n\r\n/*\r\n  Update Profile\r\n*/\r\nexport interface IUpdateProfileAction {\r\n  readonly type: typeof UPDATE_PROFILE_REQUEST;\r\n}\r\n\r\nexport interface IUpdateProfileFailedAction {\r\n  readonly type: typeof UPDATE_PROFILE_REQUEST_FAILED;\r\n}\r\n\r\nexport interface IUpdateProfileSuccessAction {\r\n  readonly type: typeof UPDATE_PROFILE_REQUEST_SUCCESS;\r\n  readonly payload: TProfileResponse;\r\n}\r\n\r\nexport const updateProfileAction = (): IUpdateProfileAction => ({\r\n  type: UPDATE_PROFILE_REQUEST,\r\n});\r\n\r\nexport const updateProfileFailedAction = (): IUpdateProfileFailedAction => ({\r\n  type: UPDATE_PROFILE_REQUEST_FAILED,\r\n});\r\n\r\nexport const updateProfileSuccessAction = (\r\n  payload: TProfileResponse\r\n): IUpdateProfileSuccessAction => ({\r\n  type: UPDATE_PROFILE_REQUEST_SUCCESS,\r\n  payload,\r\n});\r\n\r\nexport const registerThunk: AppThunk = (data: TRegisterRequest) => {\r\n  return function (dispatch: AppDispatch) {\r\n    dispatch(sendRqRegister());\r\n    registerRequest(data)\r\n      .then((res) => {\r\n        dispatch(setUserInfo(res));\r\n        if (res.accessToken) {\r\n          setCookie(ACCESS_TOKEN, res.accessToken.split(\"Bearer \")[1]);\r\n        }\r\n        if (res.refreshToken) {\r\n          setCookie(REFRESH_TOKEN, res.refreshToken);\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n        dispatch(registerFailed());\r\n      });\r\n  };\r\n};\r\n\r\nexport const loginThunk: AppThunk = (data: {\r\n  email: string;\r\n  password: string;\r\n}) => {\r\n  return async function (dispatch: AppDispatch) {\r\n    dispatch(loginAction());\r\n    await loginRequest(data)\r\n      .then((res) => {\r\n        dispatch(loginSuccessAction(res));\r\n        if (res.accessToken) {\r\n          setCookie(ACCESS_TOKEN, res.accessToken.split(\"Bearer \")[1]);\r\n        }\r\n        if (res.refreshToken) {\r\n          setCookie(REFRESH_TOKEN, res.refreshToken);\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n        dispatch(loginFailedAction());\r\n      });\r\n  };\r\n};\r\n\r\nexport const resetPasswordThunk: AppThunk = (data: TGetCodeForResetPassRQ) => {\r\n  return function (dispatch: AppDispatch) {\r\n    dispatch(sendRqGetCodeForResetPass());\r\n    resetPasswordRequest(data)\r\n      .then((res) => {\r\n        dispatch(setResGetCodeForResetPass(res));\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n        dispatch(getCodeForResetPassFailed());\r\n      });\r\n  };\r\n};\r\n\r\nexport const refreshTokenThunk: AppThunk = (data: { token: string }) => {\r\n  return function (dispatch: AppDispatch) {\r\n    dispatch(refreshTokenAction());\r\n    refreshTokenRequest(data)\r\n      .then((res) => {\r\n        dispatch(refreshTokenSuccessAction(res));\r\n        if (res.accessToken) {\r\n          setCookie(ACCESS_TOKEN, res.accessToken.split(\"Bearer \")[1]);\r\n        }\r\n        if (res.refreshToken) {\r\n          setCookie(REFRESH_TOKEN, res.refreshToken);\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n        dispatch(refreshTokenFailedAction());\r\n      });\r\n  };\r\n};\r\n\r\nexport const confirmResetPassThunk: AppThunk = (\r\n  data: TConfirmResetPassRQ,\r\n  afterLogout?: Function\r\n) => {\r\n  return function (dispatch: AppDispatch) {\r\n    dispatch(confirmResetPassRq());\r\n    confirmResetPassRequest(data)\r\n      .then((res) => {\r\n        dispatch(setResConfirmResetPass(res));\r\n        if (afterLogout) {\r\n          afterLogout();\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n        dispatch(confirmResetPassFailed());\r\n      });\r\n  };\r\n};\r\n\r\nexport const getProfileThunk: AppThunk =\r\n  () => async (dispatch: AppDispatch) => {\r\n    dispatch(getProfileAction());\r\n    try {\r\n      const json = await getProfileRequest();\r\n      await dispatch(getProfileSuccessAction(json));\r\n      return json;\r\n    } catch (err: any) {\r\n      if (err.status === 403 && err.message === JWT_EXPIRED) {\r\n        try {\r\n          const json = await refreshTokenAndFetchRetry(getProfileRequest);\r\n          dispatch(getProfileSuccessAction(json));\r\n        } catch (err: any) {\r\n          dispatch(getProfileFailedAction());\r\n        }\r\n      } else {\r\n        dispatch(getProfileFailedAction());\r\n      }\r\n    }\r\n  };\r\n\r\nexport const updateProfileThunk: AppThunk = (data: TUpdateProfileRq) => {\r\n  return function (dispatch: AppDispatch) {\r\n    dispatch(updateProfileAction());\r\n    updateProfileRequest(data)\r\n      .then((res) => {\r\n        dispatch(updateProfileSuccessAction(res));\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n        dispatch(updateProfileFailedAction());\r\n      });\r\n  };\r\n};\r\n\r\nexport const logoutThunk: AppThunk = (data: {\r\n  token: string;\r\n  afterLogout?: Function;\r\n}) => {\r\n  return function (dispatch: AppDispatch) {\r\n    dispatch(logoutAction());\r\n    logoutRequest(data)\r\n      .then((res) => {\r\n        dispatch(logoutSuccessAction(res));\r\n        deleteCookie(ACCESS_TOKEN);\r\n        deleteCookie(REFRESH_TOKEN);\r\n        if (data.afterLogout) {\r\n          data.afterLogout();\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n        dispatch(logoutFailedAction());\r\n      });\r\n  };\r\n};\r\n\r\nexport type TUserActions =\r\n  | IRegisterAction\r\n  | IRegisterFailedAction\r\n  | IRegisterSuccessAction\r\n  | IGetCodeResetPassAction\r\n  | IGetCodeResetPassSuccessAction\r\n  | IGetCodeResetPassFailedAction\r\n  | IConfirmResetAction\r\n  | IConfirmResetPassActionFailed\r\n  | IConfirmResetPassActionSuccess\r\n  | IRefreshAction\r\n  | IRefreshFailedAction\r\n  | IRefreshSuccessAction\r\n  | ILoginAction\r\n  | ILoginFailedAction\r\n  | ILoginSuccessAction\r\n  | IGetProfileAction\r\n  | IGetProfileFailedAction\r\n  | IGetProfileSuccessAction\r\n  | ILogoutAction\r\n  | ILogoutFailedAction\r\n  | ILogoutSuccessAction\r\n  | IUpdateProfileAction\r\n  | IUpdateProfileFailedAction\r\n  | IUpdateProfileSuccessAction;\r\n","import {\r\n  Button,\r\n  EmailInput,\r\n  PasswordInput,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC, useCallback, useEffect, useState } from \"react\";\r\nimport { Link, Redirect, useLocation } from \"react-router-dom\";\r\nimport { loginThunk } from \"../services/action/user\";\r\nimport { useDispatch, useSelector } from \"../services/hooks\";\r\nimport styles from \"./home.module.css\";\r\n\r\nconst LoginPage: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((store) => store.userInfo.user);\r\n  const location = useLocation<Location & { from: Location }>();\r\n  const [state, setState] = useState({ email: \"\", password: \"\" });\r\n\r\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [name]: value,\r\n    }));\r\n  }, []);\r\n\r\n  if (user) {\r\n    return <Redirect to={location.state?.from || \"/\"} />;\r\n  }\r\n\r\n  return (\r\n    <main className={styles.mainColumn}>\r\n      <h2 className=\"text text_type_main-medium pb-6\">Вход</h2>\r\n      <form className={styles.form}>\r\n        <fieldset className={styles.fieldset}>\r\n          <EmailInput\r\n            onChange={handleChange}\r\n            value={state.email}\r\n            name={\"email\"}\r\n          />\r\n          <PasswordInput\r\n            onChange={handleChange}\r\n            value={state.password}\r\n            name={\"password\"}\r\n          />\r\n          <div className={`${styles.button} pb-20`}>\r\n            <Button\r\n              type=\"primary\"\r\n              size=\"medium\"\r\n              htmlType=\"submit\"\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                dispatch(loginThunk(state));\r\n              }}\r\n            >\r\n              Войти\r\n            </Button>\r\n          </div>\r\n        </fieldset>\r\n      </form>\r\n      <ul className={styles.registrationNav}>\r\n        <li className={styles.registrationNav__item}>\r\n          <p className=\"text text_type_main-default\">\r\n            Вы — новый пользователь?\r\n          </p>\r\n          <Link className={styles.link} to=\"/register\">\r\n            Зарегистрироваться\r\n          </Link>\r\n        </li>\r\n        <li className={styles.registrationNav__item}>\r\n          <p className=\"text text_type_main-default\">Забыли пароль?</p>\r\n          <Link className={styles.link} to=\"/forgot-password\">\r\n            Восстановить пароль\r\n          </Link>\r\n        </li>\r\n      </ul>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n","import { FC, useCallback, useState } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport styles from \"./home.module.css\";\r\nimport {\r\n  Button,\r\n  EmailInput,\r\n  PasswordInput,\r\n  Input,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDispatch, useSelector } from \"../services/hooks\";\r\nimport { registerThunk } from \"../services/action/user\";\r\n\r\nconst RegisterPage: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const { request } = useSelector((state) => state.userInfo.registerInfo);\r\n  const user = useSelector((state) => state.userInfo.user);\r\n\r\n  const [state, setState] = useState({ email: \"\", name: \"\", password: \"\" });\r\n\r\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    console.log(e.target);\r\n    const { name, value } = e.target;\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [name]: value,\r\n    }));\r\n  }, []);\r\n\r\n  if (user) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: \"/\",\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className={styles.mainColumn}>\r\n      <h2 className=\"text text_type_main-medium pb-6\">Регистрация</h2>\r\n      <form className={styles.form}>\r\n        <fieldset className={styles.fieldset}>\r\n          <Input\r\n            type={\"text\"}\r\n            placeholder={\"Имя\"}\r\n            onChange={handleChange}\r\n            value={state.name}\r\n            name={\"name\"}\r\n          />\r\n          <EmailInput\r\n            onChange={handleChange}\r\n            value={state.email}\r\n            name={\"email\"}\r\n          />\r\n          <PasswordInput\r\n            onChange={handleChange}\r\n            value={state.password}\r\n            name={\"password\"}\r\n          />\r\n          <div className={`${styles.button} pb-20`}>\r\n            <Button\r\n              type=\"primary\"\r\n              size=\"medium\"\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                dispatch(registerThunk(state));\r\n                setState({ email: \"\", name: \"\", password: \"\" });\r\n              }}\r\n            >\r\n              {!request ? \"Зарегистрироваться\" : \"Регистрация...\"}\r\n            </Button>\r\n          </div>\r\n        </fieldset>\r\n      </form>\r\n      <ul className={styles.registrationNav}>\r\n        <li className={styles.registrationNav__item}>\r\n          <p className=\"text text_type_main-default\">Уже зарегистрированы?</p>\r\n          <Link className={styles.link} to=\"/login\">\r\n            Войти\r\n          </Link>\r\n        </li>\r\n      </ul>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default RegisterPage;\r\n","import { FC, useCallback, useState } from \"react\";\r\nimport { Link, Redirect, useHistory, useLocation } from \"react-router-dom\";\r\nimport styles from \"./home.module.css\";\r\nimport {\r\n  Button,\r\n  Input,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDispatch, useSelector } from \"../services/hooks\";\r\nimport { resetPasswordThunk } from \"../services/action/user\";\r\n\r\nconst ForgotPasswordPage: FC = () => {\r\n  const user = useSelector((store) => store.userInfo.user);\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const [state, setState] = useState({\r\n    email: \"\",\r\n  });\r\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [name]: value,\r\n    }));\r\n  }, []);\r\n\r\n  if (user) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: \"/\",\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className={styles.mainColumn}>\r\n      <h2 className=\"text text_type_main-medium pb-6\">Восстановление пароля</h2>\r\n      <form className={styles.form}>\r\n        <fieldset className={styles.fieldset}>\r\n          <Input\r\n            type=\"email\"\r\n            value={state.email}\r\n            name=\"email\"\r\n            onChange={handleChange}\r\n            placeholder={\"Укажите e-mail\"}\r\n          />\r\n          <div className={`${styles.button} pb-20`}>\r\n            <Button\r\n              type=\"primary\"\r\n              size=\"medium\"\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                dispatch(resetPasswordThunk(state));\r\n                history.replace({\r\n                  pathname: \"/reset-password\",\r\n                  state: { from: location },\r\n                });\r\n              }}\r\n            >\r\n              Восстановить\r\n            </Button>\r\n          </div>\r\n        </fieldset>\r\n      </form>\r\n      <ul className={styles.registrationNav}>\r\n        <li className={styles.registrationNav__item}>\r\n          <p className=\"text text_type_main-default\">Вспомнили пароль?</p>\r\n          <Link className={styles.link} to=\"/login\">\r\n            Войти\r\n          </Link>\r\n        </li>\r\n      </ul>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default ForgotPasswordPage;\r\n","import { FC, useCallback, useState } from \"react\";\r\nimport { Link, Redirect, useHistory, useLocation } from \"react-router-dom\";\r\nimport styles from \"./home.module.css\";\r\nimport {\r\n  Button,\r\n  Input,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { confirmResetPassThunk } from \"../services/action/user\";\r\nimport { useSelector } from \"../services/hooks\";\r\n\r\nconst ResetPasswordPage: FC = () => {\r\n  const user = useSelector((store) => store.userInfo.user);\r\n  const dispatch = useDispatch();\r\n  const location = useLocation<{\r\n    from: Location;\r\n  }>();\r\n  const history = useHistory();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  const [state, setState] = useState({\r\n    password: \"\",\r\n    token: \"\",\r\n  });\r\n\r\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [name]: value,\r\n    }));\r\n  }, []);\r\n\r\n  if (!location.state?.from) {\r\n    return <Redirect to=\"/forgot-password\" />;\r\n  }\r\n\r\n  if (user) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: \"/\",\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main className={styles.mainColumn}>\r\n      <h2 className=\"text text_type_main-medium pb-6\">Восстановление пароля</h2>\r\n      <form className={styles.form}>\r\n        <fieldset className={styles.fieldset}>\r\n          <Input\r\n            type={showPassword ? \"text\" : \"password\"}\r\n            name=\"password\"\r\n            value={state.password}\r\n            onChange={handleChange}\r\n            placeholder={\"Введите новый пароль\"}\r\n            icon={\"ShowIcon\"}\r\n            onIconClick={() => {\r\n              setShowPassword((preValue) => !preValue);\r\n            }}\r\n          />\r\n          <Input\r\n            type={\"text\"}\r\n            name=\"token\"\r\n            value={state.token}\r\n            onChange={handleChange}\r\n            placeholder={\"Введите код из письма\"}\r\n          />\r\n          <div className={`${styles.button} pb-20`}>\r\n            <Button\r\n              type=\"primary\"\r\n              size=\"medium\"\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                dispatch(\r\n                  confirmResetPassThunk(state, () => {\r\n                    history.replace({ pathname: \"/login\" });\r\n                  })\r\n                );\r\n              }}\r\n            >\r\n              Сохранить\r\n            </Button>\r\n          </div>\r\n        </fieldset>\r\n      </form>\r\n      <ul className={styles.registrationNav}>\r\n        <li className={styles.registrationNav__item}>\r\n          <p className=\"text text_type_main-default\">Вспомнили пароль?</p>\r\n          <Link className={styles.link} to=\"/login\">\r\n            Войти\r\n          </Link>\r\n        </li>\r\n      </ul>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default ResetPasswordPage;\r\n","import { NavLink } from \"react-router-dom\";\r\nimport styles from \"./sidebar-menu.module.css\";\r\nimport { FC } from \"react\";\r\nimport { MouseEventHandler } from \"react-dom/node_modules/@types/react\";\r\n\r\nconst setStyleActiveLink = (isActive: boolean) => {\r\n  return !isActive ? styles.link : styles.link__active + \" \" + styles.link;\r\n};\r\n\r\nconst SidebarMenu: FC<{\r\n  links: ReadonlyArray<{ readonly path: string; readonly name: string, readonly onClick? : MouseEventHandler}>;\r\n}> = ({ links }) => {\r\n  return (\r\n    <ul className={`${styles.sidebarMenu}`}>\r\n      {links.map((item, index) => (\r\n        <li key={index} className={styles.sidebarMenu__item}>\r\n          <NavLink exact className={setStyleActiveLink} to={item.path} onClick={item.onClick}>\r\n            {item.name}\r\n          </NavLink>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default SidebarMenu;\r\n","import { FC, useCallback, useEffect, useRef, useState } from \"react\";\r\nimport styles from \"./home.module.css\";\r\nimport profileStyles from \"./profile.module.css\";\r\nimport {\r\n  Button,\r\n  Input,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport SidebarMenu from \"../components/sidebar-menu/sidebar-menu\";\r\nimport { useDispatch, useSelector } from \"../services/hooks\";\r\nimport { logoutThunk, updateProfileThunk } from \"../services/action/user\";\r\nimport { getCookie } from \"../services/utils\";\r\nimport { REFRESH_TOKEN } from \"../services/constant\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst ProfilePage: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const inputEmailRef = useRef<HTMLInputElement>(null);\r\n  const inputPassRef = useRef<HTMLInputElement>(null);\r\n  const inputNameRef = useRef<HTMLInputElement>(null);\r\n\r\n  const emailValue = useSelector((store) => store.userInfo.user?.email) || \"\";\r\n  const nameValue = useSelector((store) => store.userInfo.user?.name) || \"\";\r\n  const history = useHistory();\r\n\r\n  const [state, setState] = useState({\r\n    email: {\r\n      value: emailValue,\r\n      disabled: true,\r\n    },\r\n    name: {\r\n      value: nameValue,\r\n      disabled: true,\r\n    },\r\n    password: {\r\n      value: \"\",\r\n      disabled: true,\r\n    },\r\n  });\r\n\r\n  const stateRef = useRef(state);\r\n  stateRef.current = state;\r\n\r\n  useEffect(() => {\r\n    setState({\r\n      email: {\r\n        value: emailValue,\r\n        disabled: true,\r\n      },\r\n      name: {\r\n        value: nameValue,\r\n        disabled: true,\r\n      },\r\n      password: {\r\n        value: \"\",\r\n        disabled: true,\r\n      },\r\n    });\r\n  }, [emailValue, nameValue]);\r\n\r\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = e.target.value;\r\n    const name = e.target.name as keyof typeof state;\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [name]: {\r\n        ...prevState[name],\r\n        value,\r\n      },\r\n    }));\r\n  }, []);\r\n\r\n  const handleIconClick = useCallback((nameInput: keyof typeof state) => {\r\n    console.log(nameInput);\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [nameInput]: {\r\n        ...prevState[nameInput],\r\n        disabled: !prevState[nameInput].disabled,\r\n      },\r\n    }));\r\n  }, []);\r\n\r\n  const onBlur = useCallback((nameInput: keyof typeof state) => {\r\n    console.log(nameInput);\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [nameInput]: {\r\n        ...prevState[nameInput],\r\n        disabled: true,\r\n      },\r\n    }));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!state.name.disabled) inputNameRef.current?.focus();\r\n    if (!state.email.disabled) inputEmailRef.current?.focus();\r\n    if (!state.password.disabled) inputPassRef.current?.focus();\r\n  }, [state]);\r\n\r\n  const onClickLogoutLink = useCallback(\r\n    async (e) => {\r\n      e.preventDefault();\r\n      dispatch(\r\n        logoutThunk(getCookie(REFRESH_TOKEN), () => {\r\n          history.replace({ pathname: \"/login\" });\r\n        })\r\n      );\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const handleUpdateProfile = useCallback((e) => {\r\n    e.preventDefault();\r\n    dispatch(\r\n      updateProfileThunk({\r\n        email: stateRef.current.email.value,\r\n        password: stateRef.current.password.value,\r\n        name: stateRef.current.name.value,\r\n      })\r\n    );\r\n  }, []);\r\n\r\n  const handleCancelChange = useCallback((e) => {\r\n    e.preventDefault();\r\n    setState({\r\n      email: {\r\n        value: emailValue,\r\n        disabled: true,\r\n      },\r\n      name: {\r\n        value: nameValue,\r\n        disabled: true,\r\n      },\r\n      password: {\r\n        value: \"\",\r\n        disabled: true,\r\n      },\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <main className={profileStyles.main}>\r\n      <div className={profileStyles.main__container}>\r\n        <div className={profileStyles.wrapper}>\r\n          <div className={profileStyles.sidebarLeft}>\r\n            <SidebarMenu\r\n              links={[\r\n                { path: \"/profile\", name: \"Профиль\" },\r\n                { path: \"/profile/orders\", name: \"История заказов\" },\r\n                { path: \"/logout\", name: \"Выход\", onClick: onClickLogoutLink },\r\n              ]}\r\n            />\r\n            <p\r\n              className={`${profileStyles.aboutProfilePage} text text_type_main-default`}\r\n            >\r\n              В этом разделе вы можете изменить свои персональные данные\r\n            </p>\r\n          </div>\r\n\r\n          <form className={styles.form}>\r\n            <fieldset className={styles.fieldset}>\r\n              <Input\r\n                type=\"text\"\r\n                name=\"name\"\r\n                value={state.name.value}\r\n                onChange={handleChange}\r\n                placeholder={\"Имя\"}\r\n                icon={\"EditIcon\"}\r\n                disabled={state.name.disabled}\r\n                onIconClick={() => {\r\n                  handleIconClick(\"name\");\r\n                }}\r\n                ref={inputNameRef}\r\n                onBlur={() => {\r\n                  onBlur(\"name\");\r\n                }}\r\n              />\r\n              <Input\r\n                type=\"text\"\r\n                name=\"email\"\r\n                value={state.email.value}\r\n                onChange={handleChange}\r\n                placeholder={\"Логин\"}\r\n                icon={\"EditIcon\"}\r\n                disabled={state.email.disabled}\r\n                onIconClick={() => {\r\n                  handleIconClick(\"email\");\r\n                }}\r\n                ref={inputEmailRef}\r\n                onBlur={() => {\r\n                  onBlur(\"email\");\r\n                }}\r\n              />\r\n              <Input\r\n                type=\"password\"\r\n                name=\"password\"\r\n                value={state.password.value}\r\n                onChange={handleChange}\r\n                placeholder={\"Пароль\"}\r\n                icon={\"EditIcon\"}\r\n                disabled={state.password.disabled}\r\n                onIconClick={() => {\r\n                  handleIconClick(\"password\");\r\n                }}\r\n                ref={inputPassRef}\r\n                onBlur={() => {\r\n                  onBlur(\"password\");\r\n                }}\r\n              />\r\n              <div className={`${styles.button} ${styles.button__group}`}>\r\n                <Button\r\n                  type=\"primary\"\r\n                  size=\"medium\"\r\n                  onClick={handleCancelChange}\r\n                >\r\n                  Отменить\r\n                </Button>\r\n                <Button\r\n                  type=\"primary\"\r\n                  size=\"medium\"\r\n                  onClick={handleUpdateProfile}\r\n                >\r\n                  Сохранить\r\n                </Button>\r\n              </div>\r\n            </fieldset>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default ProfilePage;\r\n","import { Redirect, Route } from \"react-router-dom\";\r\nimport { FC, useEffect, useState } from \"react\";\r\nimport { RouteProps } from \"react-router\";\r\n\r\nexport const ProtectedRoute: FC<\r\n  RouteProps & { user: { email: string; name: string } | null } & {\r\n    isUserLoaded: boolean;\r\n  }\r\n> = ({ children, user, isUserLoaded, ...rest }) => {\r\n  if (!isUserLoaded) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        user ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: location },\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n","import style from \"./ingredientDetails.module.css\";\r\nimport { FC } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useSelector } from \"../../services/hooks\";\r\n\r\nconst IngredientDetails: FC = () => {\r\n  const {id} = useParams<{id :string}>();\r\n  const ingredientInfo = useSelector((state) => {\r\n    return state.burgerIngredients.burgerIngredients.find((element) => {\r\n      return element._id === id;\r\n    });\r\n  });\r\n\r\n  console.log(ingredientInfo)\r\n  return (\r\n    <div className={style.ingredientDetails}>\r\n      <img\r\n        className=\"pb-6\"\r\n        src={ingredientInfo?.image_large}\r\n        alt={ingredientInfo?.name}\r\n      />\r\n      <p className=\"text text_type_main-medium pb-8\">{ingredientInfo?.name}</p>\r\n      <ul className={style.ingredientDetails__nutritionalValue}>\r\n        <li className={style.ingredientDetails__nutritionaValueItem}>\r\n          <p\r\n            className={`text text_type_main-default ${style.ingredientDetails__nutritionaName}`}\r\n          >\r\n            Калории,ккал\r\n          </p>\r\n          <p\r\n            className={`${style.ingredientDetails__nutritionaCount} text text_type_digits-default `}\r\n          >\r\n            {ingredientInfo?.calories}\r\n          </p>\r\n        </li>\r\n        <li className={style.ingredientDetails__nutritionaValueItem}>\r\n          <p\r\n            className={`text text_type_main-default ${style.ingredientDetails__nutritionaName}`}\r\n          >\r\n            Белки, г\r\n          </p>\r\n          <p\r\n            className={`${style.ingredientDetails__nutritionaCount} text text_type_digits-default `}\r\n          >\r\n            {ingredientInfo?.proteins}\r\n          </p>\r\n        </li>\r\n        <li className={style.ingredientDetails__nutritionaValueItem}>\r\n          <p\r\n            className={`text text_type_main-default ${style.ingredientDetails__nutritionaName}`}\r\n          >\r\n            Жиры, г\r\n          </p>\r\n          <p\r\n            className={`${style.ingredientDetails__nutritionaCount} text text_type_digits-default `}\r\n          >\r\n            {ingredientInfo?.fat}\r\n          </p>\r\n        </li>\r\n        <li className={style.ingredientDetails__nutritionaValueItem}>\r\n          <p\r\n            className={`text text_type_main-default ${style.ingredientDetails__nutritionaName}`}\r\n          >\r\n            Углеводы, г\r\n          </p>\r\n          <p\r\n            className={`${style.ingredientDetails__nutritionaCount} text text_type_digits-default `}\r\n          >\r\n            {ingredientInfo?.carbohydrates}\r\n          </p>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IngredientDetails;\r\n","import { FC } from \"react\";\r\nimport styles from \"./home.module.css\";\r\nimport IngredientDetails from \"../components/ingredient-details/IngredientDetails\";\r\n\r\nconst IngredientPage: FC = () => {\r\n  return (\r\n    <main className={styles.mainColumn}>\r\n      <IngredientDetails />\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default IngredientPage;\r\n","import { FC } from \"react\";\r\nimport styles from \"./home.module.css\";\r\n\r\nconst NotFoundPage: FC = () => {\r\n  return (\r\n    <main className={styles.mainColumn}>\r\n      <h2>not found 404</h2>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default NotFoundPage;\r\n","import AppHeader from \"../app-header/app-header\";\r\nimport { Switch, Route, useHistory } from \"react-router-dom\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { FC, useCallback, useEffect, useState } from \"react\";\r\nimport HomePage from \"../../pages/home\";\r\nimport LoginPage from \"../../pages/login\";\r\nimport RegisterPage from \"../../pages/register\";\r\nimport ForgotPasswordPage from \"../../pages/forgot-password\";\r\nimport ResetPasswordPage from \"../../pages/reset-password\";\r\nimport { useDispatch, useSelector } from \"../../services/hooks\";\r\nimport { getProfileThunk, refreshTokenThunk } from \"../../services/action/user\";\r\nimport ProfilePage from \"../../pages/profile\";\r\nimport { getIngredientItemsThunk } from \"../../services/action/burger-ingredients\";\r\nimport { setInterval } from \"timers\";\r\nimport { getCookie } from \"../../services/utils\";\r\nimport { REFRESH_TOKEN } from \"../../services/constant\";\r\nimport { ProtectedRoute } from \"../protected-route/protected-route\";\r\nimport Modal from \"../modal/modal\";\r\nimport IngredientDetails from \"../ingredient-details/IngredientDetails\";\r\nimport IngredientPage from \"../../pages/ingredient\";\r\nimport NotFoundPage from \"../../pages/not-found\";\r\n\r\nconst App: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((store) => store.userInfo.user);\r\n  const [isUserLoaded, setUserLoaded] = useState(false);\r\n  const location = useLocation<{\r\n    background?: any;\r\n  }>();\r\n  const history = useHistory();\r\n\r\n  const init = async () => {\r\n    await dispatch(getIngredientItemsThunk());\r\n    await dispatch(getProfileThunk());\r\n    setUserLoaded(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    init();\r\n    setInterval(() => {\r\n      dispatch(refreshTokenThunk(getCookie(REFRESH_TOKEN)));\r\n    }, 1000 * 60 * 19);\r\n  }, []);\r\n\r\n  const handelCloseModal = useCallback(() => {\r\n    history.goBack();\r\n  }, []);\r\n\r\n  const background =\r\n    history.action === \"PUSH\" && location.state && location.state.background;\r\n  return (\r\n    <>\r\n      <AppHeader />\r\n      <Switch location={background || location}>\r\n        <Route path=\"/\" exact={true} component={HomePage}></Route>\r\n        <Route path=\"/login\" component={LoginPage}></Route>\r\n        <Route path=\"/register\" component={RegisterPage}></Route>\r\n        <Route path=\"/forgot-password\" component={ForgotPasswordPage}></Route>\r\n        <Route path=\"/reset-password\" component={ResetPasswordPage}></Route>\r\n        <ProtectedRoute\r\n          path={`/profile`}\r\n          exact={true}\r\n          user={user}\r\n          isUserLoaded={isUserLoaded}\r\n        >\r\n          <ProfilePage />\r\n        </ProtectedRoute>\r\n        <Route path=\"/ingredients/:id\" component={IngredientPage}></Route>\r\n        <Route>\r\n          <NotFoundPage />\r\n        </Route>\r\n      </Switch>\r\n\r\n      {background && (\r\n        <Route path=\"/ingredients/:id\">\r\n          <Modal onClose={handelCloseModal} title=\"Детали ингредиента\">\r\n            <IngredientDetails />\r\n          </Modal>\r\n        </Route>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import {\r\n  BURGER_INGREDIENTS_FAILED,\r\n  BURGER_INGREDIENTS_SUCCESS,\r\n  BURGER_INGREDIENTS_REQUEST,\r\n  INCREMENT_INGREDIENTS,\r\n  INCREMENT_BUN,\r\n  DECREMENT_INGREDIENTS,\r\n  RESET_QTY_INGREDIENTS,\r\n  TBurgerIngredientsActions,\r\n} from \"../action/burger-ingredients\";\r\nimport { TIngredient } from \"../types/data\";\r\n\r\ntype TIngredientsState = {\r\n  burgerIngredients: ReadonlyArray<TIngredient>;\r\n  burgerIngredientsRequest: boolean;\r\n  burgerIngredientsFailed: boolean;\r\n};\r\n\r\nconst ingredientsInitialState: TIngredientsState = {\r\n  burgerIngredients: [],\r\n  burgerIngredientsRequest: false,\r\n  burgerIngredientsFailed: false,\r\n};\r\n\r\nexport const burgerIngredientsReducer = (\r\n  state = ingredientsInitialState,\r\n  action: TBurgerIngredientsActions\r\n) => {\r\n  switch (action.type) {\r\n    case BURGER_INGREDIENTS_REQUEST: {\r\n      return { ...state, ingredientsInitialState: true };\r\n    }\r\n    case BURGER_INGREDIENTS_SUCCESS: {\r\n      return {\r\n        burgerIngredients: action.payload,\r\n        burgerIngredientsRequest: false,\r\n        burgerIngredientsFailed: false,\r\n      };\r\n    }\r\n    case BURGER_INGREDIENTS_FAILED: {\r\n      return {\r\n        ...state,\r\n        burgerIngredientsRequest: false,\r\n        burgerIngredientsFailed: true,\r\n      };\r\n    }\r\n    case INCREMENT_INGREDIENTS: {\r\n      return {\r\n        ...state,\r\n        burgerIngredients: [...state.burgerIngredients].map((element) =>\r\n          element._id === action.payload._id\r\n            ? { ...element, qty: element.qty! + 1 || 1 }\r\n            : element\r\n        ),\r\n      };\r\n    }\r\n    case DECREMENT_INGREDIENTS: {\r\n      return {\r\n        ...state,\r\n        burgerIngredients: [...state.burgerIngredients].map((element) =>\r\n          element._id === action.payload._id\r\n            ? { ...element, qty: element.qty! - 1 || null }\r\n            : element\r\n        ),\r\n      };\r\n    }\r\n    // Булка может быть одна\r\n    // Если мы перетащили булку, то добавляем ей qty = 2(так как их две)\r\n    // Остальным булкам убираем qty = null\r\n    // Если это не булка, ничего не делаем\r\n    case INCREMENT_BUN: {\r\n      return {\r\n        ...state,\r\n        burgerIngredients: [...state.burgerIngredients].map((element) =>\r\n          element._id === action.payload._id && element.type === \"bun\"\r\n            ? { ...element, qty: 2 }\r\n            : element.type === \"bun\"\r\n            ? { ...element, qty: null }\r\n            : element\r\n        ),\r\n      };\r\n    }\r\n\r\n    case RESET_QTY_INGREDIENTS: {\r\n      return {\r\n        ...state,\r\n        burgerIngredients: [...state.burgerIngredients].map((element) => {\r\n          return { ...element, qty: null };\r\n        }),\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  ADD_INGREDIENT,\r\n  DELETE_ITEM,\r\n  ADD_BUN,\r\n  REORDER_INGREDIENTS,\r\n  SET_DEFAULT_VALUE_INGREDIENTS,\r\n  TBurgerConstructorActions,\r\n} from \"../action/burger-constructor\";\r\nimport { TIngredientWithUniqKey } from \"../types/data\";\r\n\r\ntype TConstructorState = {\r\n  ingredients: Array<TIngredientWithUniqKey>;\r\n};\r\n\r\nconst constructorInitialState: TConstructorState = {\r\n  ingredients: [],\r\n};\r\n\r\nexport const burgerConstructorReducer = (\r\n  state = constructorInitialState,\r\n  action: TBurgerConstructorActions\r\n) => {\r\n  switch (action.type) {\r\n    case ADD_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        ingredients: [...state.ingredients, action.payload],\r\n      };\r\n    }\r\n    case ADD_BUN: {\r\n      const indexElement = [...state.ingredients].findIndex((element) => {\r\n        return element.type === \"bun\";\r\n      });\r\n      // Если булки нет в массиве, то добавляем\r\n      // Если есть, то ищем индекс и меняем\r\n      const res =\r\n        indexElement === -1\r\n          ? [action.payload, ...state.ingredients]\r\n          : [\r\n              ...state.ingredients.slice(0, indexElement),\r\n              action.payload,\r\n              ...state.ingredients.slice(indexElement + 1),\r\n            ];\r\n\r\n      return {\r\n        ...state,\r\n        ingredients: res,\r\n      };\r\n    }\r\n    case DELETE_ITEM: {\r\n      return {\r\n        ...state,\r\n        ingredients: [...state.ingredients].filter((element) => {\r\n          return element.uuid !== action.id;\r\n        }),\r\n      };\r\n    }\r\n    case REORDER_INGREDIENTS: {\r\n      return {\r\n        ...state,\r\n        ingredients: [...action.payload],\r\n      };\r\n    }\r\n    case SET_DEFAULT_VALUE_INGREDIENTS: {\r\n      return {\r\n        ...constructorInitialState,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { TIngredient } from \"../types/data\";\r\n\r\nexport const SET_INGREDIENT_DETAIL: \"SET_INGREDIENT_DETAIL\" =\r\n  \"SET_INGREDIENT_DETAIL\";\r\nexport const INIT_INGREDIENT_DETAIL = \"INIT_INGREDIENT_DETAIL\";\r\n\r\nexport interface TSetDetailInfoIngredient {\r\n  readonly type: typeof SET_INGREDIENT_DETAIL;\r\n  readonly payload: TIngredient;\r\n}\r\n\r\nexport interface TSetDefaultValuesIngredientDetail {\r\n  readonly type: typeof INIT_INGREDIENT_DETAIL;\r\n}\r\n\r\nexport const setDetailInfoIngredient = (\r\n  payload: TIngredient\r\n): TSetDetailInfoIngredient => ({\r\n  type: SET_INGREDIENT_DETAIL,\r\n  payload,\r\n});\r\n\r\nexport const setDefaultValuesIngredientDetail =\r\n  (): TSetDefaultValuesIngredientDetail => ({\r\n    type: INIT_INGREDIENT_DETAIL,\r\n  });\r\n\r\nexport type TIngredientDetailsActions =\r\n  | TSetDetailInfoIngredient\r\n  | TSetDefaultValuesIngredientDetail;\r\n","import {\r\n  SET_INGREDIENT_DETAIL,\r\n  INIT_INGREDIENT_DETAIL,\r\n  TIngredientDetailsActions,\r\n} from \"../action/ingredient-details\";\r\nimport { TIngredient } from \"../types/data\";\r\n\r\ntype TIngredientWithNull<T> = { [k in keyof T]: T[k] | null };\r\n\r\nconst ingredientDetailState: TIngredientWithNull<TIngredient> = {\r\n  calories: null,\r\n  carbohydrates: null,\r\n  fat: null,\r\n  image: null,\r\n  image_large: null,\r\n  image_mobile: null,\r\n  name: null,\r\n  price: null,\r\n  proteins: null,\r\n  type: null,\r\n  __v: null,\r\n  _id: null,\r\n};\r\n\r\nexport const ingredientDetailsReducer = (\r\n  state = ingredientDetailState,\r\n  action: TIngredientDetailsActions\r\n) => {\r\n  switch (action.type) {\r\n    case SET_INGREDIENT_DETAIL: {\r\n      return {\r\n        ...action.payload,\r\n      };\r\n    }\r\n    case INIT_INGREDIENT_DETAIL: {\r\n      return {\r\n        ...ingredientDetailState,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  ORDER_REQUEST,\r\n  ORDER_SUCCESS,\r\n  ORDER_FAILED,\r\n  TOrderDetailsActions,\r\n} from \"../action/order-details\";\r\nimport { TOrderSuccess } from \"../types/data\";\r\n\r\nconst orderInitState: TOrderSuccess & {\r\n  orderRequest: boolean;\r\n  orderFailed: boolean;\r\n} = {\r\n  orderRequest: false,\r\n  orderFailed: false,\r\n  order: { number: 0 },\r\n  success: false,\r\n  name: \"\",\r\n};\r\nexport const orderStateReducer = (\r\n  state = orderInitState,\r\n  action: TOrderDetailsActions\r\n) => {\r\n  switch (action.type) {\r\n    case ORDER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        orderRequest: true,\r\n        success: false,\r\n      };\r\n    }\r\n    case ORDER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        orderRequest: false,\r\n        orderFailed: false,\r\n      };\r\n    }\r\n    case ORDER_FAILED: {\r\n      return {\r\n        ...state,\r\n        orderRequest: false,\r\n        orderFailed: true,\r\n        success: false,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  CONFIRM_RESET_PASSWORD_FAILED,\r\n  CONFIRM_RESET_PASSWORD_REQUEST,\r\n  CONFIRM_RESET_PASSWORD_SUCCESS,\r\n  GET_CODE_RESET_PASSWORD_FAILED,\r\n  GET_CODE_RESET_PASSWORD_REQUEST,\r\n  GET_CODE_RESET_PASSWORD_SUCCESS,\r\n  REGISTER_REQUEST_FAILED,\r\n  REGISTER_REQUEST,\r\n  REGISTER_REQUEST_SUCCESS,\r\n  TUserActions,\r\n  LOGIN_REQUEST,\r\n  LOGIN_REQUEST_SUCCESS,\r\n  LOGIN_REQUEST_FAILED,\r\n  GET_PROFILE_REQUEST,\r\n  GET_PROFILE_REQUEST_SUCCESS,\r\n  GET_PROFILE_REQUEST_FAILED,\r\n  LOGOUT_REQUEST,\r\n  LOGOUT_REQUEST_FAILED,\r\n  LOGOUT_REQUEST_SUCCESS,\r\n} from \"../action/user\";\r\nimport { TUser } from \"../types/data\";\r\n\r\nconst userState: TUser = {\r\n  success: false,\r\n  user: null,\r\n  accessToken: \"\",\r\n  refreshToken: \"\",\r\n  registerInfo: {\r\n    request: false,\r\n    failedRequest: false,\r\n    success: false,\r\n  },\r\n  codePasswordInfo: {\r\n    request: false,\r\n    failedRequest: false,\r\n    message: \"\",\r\n    success: false,\r\n  },\r\n  confirmResetPass: {\r\n    request: false,\r\n    failedRequest: false,\r\n    message: \"\",\r\n    success: false,\r\n  },\r\n  loginInfo: {\r\n    request: false,\r\n    failedRequest: false,\r\n    success: false,\r\n  },\r\n  getProfileInfo: {\r\n    request: false,\r\n    failedRequest: false,\r\n    success: false,\r\n  },\r\n  logoutInfo: {\r\n    request: false,\r\n    failedRequest: false,\r\n    success: false,\r\n    message: \"\",\r\n  },\r\n};\r\n\r\nexport const userStateReducer = (\r\n  state = userState,\r\n  action: TUserActions\r\n): TUser => {\r\n  switch (action.type) {\r\n    case REGISTER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        registerInfo: {\r\n          ...state.registerInfo,\r\n          request: true,\r\n          success: false,\r\n          failedRequest: false,\r\n        },\r\n      };\r\n    }\r\n    case REGISTER_REQUEST_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        user: action.payload.user,\r\n        registerInfo: {\r\n          ...state.registerInfo,\r\n          request: false,\r\n          success: true,\r\n          failedRequest: false,\r\n        },\r\n      };\r\n    }\r\n    case REGISTER_REQUEST_FAILED: {\r\n      return {\r\n        ...state,\r\n        registerInfo: {\r\n          ...state.registerInfo,\r\n          request: false,\r\n          success: false,\r\n          failedRequest: true,\r\n        },\r\n      };\r\n    }\r\n    case GET_CODE_RESET_PASSWORD_REQUEST: {\r\n      return {\r\n        ...state,\r\n        codePasswordInfo: {\r\n          ...state.codePasswordInfo,\r\n          request: true,\r\n          failedRequest: false,\r\n        },\r\n      };\r\n    }\r\n    case GET_CODE_RESET_PASSWORD_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        codePasswordInfo: {\r\n          ...state.codePasswordInfo,\r\n          ...action.payload,\r\n          request: false,\r\n          failedRequest: false,\r\n        },\r\n      };\r\n    }\r\n    case GET_CODE_RESET_PASSWORD_FAILED: {\r\n      return {\r\n        ...state,\r\n        codePasswordInfo: {\r\n          ...state.codePasswordInfo,\r\n          request: false,\r\n          failedRequest: true,\r\n        },\r\n      };\r\n    }\r\n    case CONFIRM_RESET_PASSWORD_REQUEST: {\r\n      return {\r\n        ...state,\r\n        confirmResetPass: {\r\n          ...state.confirmResetPass,\r\n          request: true,\r\n          failedRequest: false,\r\n        },\r\n      };\r\n    }\r\n    case CONFIRM_RESET_PASSWORD_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        confirmResetPass: {\r\n          ...state.confirmResetPass,\r\n          ...action.payload,\r\n          request: false,\r\n          failedRequest: false,\r\n        },\r\n      };\r\n    }\r\n    case CONFIRM_RESET_PASSWORD_FAILED: {\r\n      return {\r\n        ...state,\r\n        confirmResetPass: {\r\n          ...state.confirmResetPass,\r\n          request: false,\r\n          failedRequest: true,\r\n        },\r\n      };\r\n    }\r\n    case LOGIN_REQUEST: {\r\n      return {\r\n        ...state,\r\n        loginInfo: {\r\n          ...state.loginInfo,\r\n          request: true,\r\n          failedRequest: false,\r\n        },\r\n      };\r\n    }\r\n    case LOGIN_REQUEST_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        user: action.payload.user,\r\n        loginInfo: {\r\n          ...state.loginInfo,\r\n          ...action.payload,\r\n          request: false,\r\n          failedRequest: false,\r\n        },\r\n      };\r\n    }\r\n    case LOGIN_REQUEST_FAILED: {\r\n      return {\r\n        ...state,\r\n        loginInfo: {\r\n          ...state.loginInfo,\r\n          request: false,\r\n          failedRequest: true,\r\n        },\r\n      };\r\n    }\r\n\r\n    case GET_PROFILE_REQUEST: {\r\n      return {\r\n        ...state,\r\n        getProfileInfo: {\r\n          ...state.getProfileInfo,\r\n          request: true,\r\n          failedRequest: false,\r\n        },\r\n      };\r\n    }\r\n    case GET_PROFILE_REQUEST_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        user: action.payload.user,\r\n        getProfileInfo: {\r\n          ...state.getProfileInfo,\r\n          success: action.payload.success,\r\n          request: false,\r\n          failedRequest: false,\r\n        },\r\n      };\r\n    }\r\n    case GET_PROFILE_REQUEST_FAILED: {\r\n      return {\r\n        ...state,\r\n        getProfileInfo: {\r\n          ...state.getProfileInfo,\r\n          request: false,\r\n          failedRequest: true,\r\n        },\r\n      };\r\n    }\r\n\r\n    case LOGOUT_REQUEST: {\r\n      return {\r\n        ...state,\r\n        logoutInfo: {\r\n          ...state.logoutInfo,\r\n          request: true,\r\n          failedRequest: false,\r\n        },\r\n      };\r\n    }\r\n    case LOGOUT_REQUEST_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        user: null,\r\n        logoutInfo: {\r\n          ...state.logoutInfo,\r\n          success: action.payload.success,\r\n          message: action.payload.message,\r\n          request: false,\r\n          failedRequest: false,\r\n        },\r\n      };\r\n    }\r\n    case LOGOUT_REQUEST_FAILED: {\r\n      return {\r\n        ...state,\r\n        logoutInfo: {\r\n          ...state.logoutInfo,\r\n          request: false,\r\n          failedRequest: true,\r\n        },\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport { burgerIngredientsReducer } from \"./burger-ingredients\";\r\nimport { burgerConstructorReducer } from \"./burger-constructor\";\r\nimport { ingredientDetailsReducer } from \"./ingredient-details\";\r\nimport { orderStateReducer } from \"./order-details\";\r\nimport { userStateReducer } from \"./user\";\r\n\r\nexport const rootReducer = combineReducers({\r\n  burgerIngredients: burgerIngredientsReducer,\r\n  burgerConstructor: burgerConstructorReducer,\r\n  ingredientDetails: ingredientDetailsReducer,\r\n  orderInfo: orderStateReducer,\r\n  userInfo: userStateReducer,\r\n});\r\n","import { rootReducer } from \"./reducers/\";\r\nimport { compose, createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\ndeclare global {\r\n  interface Window {\r\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n  }\r\n}\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk));\r\n\r\nconst store = createStore(rootReducer, enhancer);\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/App/App\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./services/store\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__mx4J9\",\"headerContent\":\"app-header_headerContent__3AaFA\",\"menu\":\"app-header_menu__K1-am\",\"menu__list\":\"app-header_menu__list__3qN_N\",\"menu__item\":\"app-header_menu__item__KRK0_\",\"account\":\"app-header_account__2FrNf\",\"logo\":\"app-header_logo__2_aT4\",\"linkHeader\":\"app-header_linkHeader__21lYc\",\"linkHeader__active\":\"app-header_linkHeader__active__3Zon3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerconstructorList__inner\":\"constructor-list_burgerconstructorList__inner__DmqEE\",\"burgerconstructorListOverflowHidden__inner\":\"constructor-list_burgerconstructorListOverflowHidden__inner__12gRO\",\"burgerconstructorList__item\":\"constructor-list_burgerconstructorList__item__3vwZb\",\"burgerconstructorList\":\"constructor-list_burgerconstructorList__2fhz3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"profile_main__13pDE\",\"main__container\":\"profile_main__container__3QTMs\",\"wrapper\":\"profile_wrapper__1_bkU\",\"sidebarLeft\":\"profile_sidebarLeft__p-PmV\",\"aboutProfilePage\":\"profile_aboutProfilePage__HIr5c\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebarMenu\":\"sidebar-menu_sidebarMenu__3iGjh\",\"sidebarMenu__item\":\"sidebar-menu_sidebarMenu__item__2ZcTH\",\"link\":\"sidebar-menu_link__2XWwC\",\"link__active\":\"sidebar-menu_link__active__39BM0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerConstructorList__innerItem\":\"constructor-item_burgerConstructorList__innerItem__3yS9F\",\"wrapperConstructorElement\":\"constructor-item_wrapperConstructorElement__370NU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"home_main__3kzFK\",\"mainColumn\":\"home_mainColumn__1nmeu\",\"fieldset\":\"home_fieldset__1J6I3\",\"button\":\"home_button__I63wR\",\"button__group\":\"home_button__group__2kZ69\",\"link\":\"home_link__3-E7T\",\"registrationNav\":\"home_registrationNav__3fPHl\",\"registrationNav__item\":\"home_registrationNav__item__3MgD3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerConstructor\":\"burger-constructor_burgerConstructor__T5h6w\",\"burgerConstructor__total\":\"burger-constructor_burgerConstructor__total__1qOUo\",\"buttonOrder\":\"burger-constructor_buttonOrder__3RJSX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"modal_popup__2MJyD\",\"popup__close\":\"modal_popup__close__31KGy\",\"popup__title\":\"modal_popup__title__2Pucf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card__list\":\"ingredientList_card__list__3IBBn\",\"card__listItem\":\"ingredientList_card__listItem__3v-LR\"};"],"sourceRoot":""}